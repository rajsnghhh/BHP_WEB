{"version":3,"sources":["./src/app/modules/role-access/role-access.component.ts","./src/app/modules/role-access/role-access.component.html","./src/app/modules/role-access/role-access-routing.module.ts","./src/app/modules/role-access/role-access.module.ts"],"names":[],"mappings":"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","file":"modules-role-access-role-access-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\nimport { HttpService } from 'src/app/modules/core/http/http.service';\r\nimport { DataAccessDTO } from '../core/models/dataAccessDTO.model';\r\nimport { MainFunctionDTO } from '../core/models/mainFunctionDTO.model';\r\nimport { RoleMasterDTO } from '../core/models/roleMasterDTO.model';\r\nimport { RoleFunctionMapDTO } from '../core/models/roleSubFunctionMapDTO.model';\r\nimport { SubFunctionMasterDTO } from '../core/models/subFunctionDTO.model';\r\n\r\n@Component({\r\n  selector: 'app-role-access',\r\n  templateUrl: './role-access.component.html',\r\n  styleUrls: ['./role-access.component.css']\r\n})\r\nexport class RoleAccessComponent implements OnInit {\r\n  // menuData: any = [];\r\n  main_functions: MainFunctionDTO[];\r\n  mainFunctionId: any = '';\r\n  subFunctions: SubFunctionMasterDTO[];\r\n  subFunctionsDropDown: any = [];\r\n  selectedSubFunction: string = ''\r\n  actionTypes: any = [];\r\n  roleList: RoleMasterDTO[];\r\n  roleAccessData: RoleFunctionMapDTO[];\r\n  roleAccessSaveObj: {\r\n    dataAccessDTO: DataAccessDTO,\r\n    roleFunctionMapDTOList: RoleFunctionMapDTO[];\r\n  }\r\n\r\n  abcd: string;\r\n  constructor(private httpService: HttpService, private route: ActivatedRoute) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.route.data.subscribe(data => {\r\n      // this.menuData = data;\r\n      console.log(data);\r\n      this.roleAccessData = data.roleAcess.responseObject;\r\n      console.log(this.roleAccessData);\r\n      this.roleList = this.roleAccessData.map(item => item.roleMasterDTO);\r\n      this.main_functions = this.roleAccessData[0].mainFunctionDTOList\r\n    });\r\n\r\n\r\n  }\r\n\r\n  getSubFunctions() {\r\n\r\n    this.subFunctions = this.roleAccessData[0].mainFunctionDTOList.find(item => item.mainFunctionMasterId === this.mainFunctionId).subFunctionMasterDTOList;\r\n\r\n    this.subFunctionsDropDown = new Set(this.subFunctions.map(item => item.subFunctionShortName));\r\n\r\n  }\r\n\r\n  createTableRows() {\r\n\r\n    this.actionTypes = this.subFunctions.filter(item => item.subFunctionShortName === this.selectedSubFunction)\r\n    console.log(this.actionTypes);\r\n  }\r\n\r\n  assignAccess(subFunctionId, roleIndex, event) {\r\n    let checked = event.target.checked;\r\n    let item = this.roleAccessData[roleIndex].mainFunctionDTOList.find(\r\n      item => item.mainFunctionMasterId === this.mainFunctionId\r\n    ).subFunctionMasterDTOList.find(item => item.subFunctionMasterId === subFunctionId)\r\n\r\n    if (checked)\r\n      item.roleActiveFlag = 'Y'\r\n    else\r\n      item.roleActiveFlag = 'N'\r\n\r\n    // console.log(item);\r\n    console.log(this.roleAccessData);\r\n\r\n  }\r\n\r\n  checkStatus(subFunctionId, roleIndex): any {\r\n    let flag = this.roleAccessData[roleIndex].mainFunctionDTOList.find(\r\n      item => item.mainFunctionMasterId === this.mainFunctionId\r\n    ).subFunctionMasterDTOList.find(item => item.subFunctionMasterId === subFunctionId).roleActiveFlag\r\n\r\n    // console.log(flag);\r\n    if (flag === 'Y')\r\n      return true\r\n\r\n    else\r\n      return false\r\n\r\n  }\r\n\r\n  save() {\r\n    this.roleAccessSaveObj = {\r\n      dataAccessDTO: this.httpService.dataAccessDTO,\r\n      roleFunctionMapDTOList: this.roleAccessData\r\n    };\r\n\r\n    console.log(this.roleAccessSaveObj);\r\n    this.httpService.postRequest(`rolesubfunctionmap/save`, this.roleAccessSaveObj).subscribe((data) => {\r\n      console.log(data)\r\n    },\r\n\r\n      (error) => {\r\n        console.log(error);\r\n      })\r\n  }\r\n\r\n}\r\n","<div class=\"container\">\r\n    <div class=\"white_box QA_section mb_30\">\r\n        <h2 class=\"page-title\">Role Menu Map</h2>\r\n        <div class=\"row my-3\">\r\n            <div class=\"col\">\r\n                <label for=\"\" class=\"col-form-label\">Main Function: </label>\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <!-- [(ngModel)]=\"mainFunctionId\" -->\r\n                <select name=\"\" id=\"\" class=\"form-select\"  (change)=\"getSubFunctions()\">\r\n                    <option value=\"\">-- Main Function --</option>\r\n                    <option [ngValue]=\"item.mainFunctionMasterId\"\r\n                        *ngFor=\"let item of roleAccessData[0].mainFunctionDTOList\">\r\n                        {{item.mainFunctionName}}</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div class=\"col\">\r\n                <label for=\"\" class=\"col-form-label\">Sub Function: </label>\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <!-- [(ngModel)]=\"selectedSubFunction\" -->\r\n                <select name=\"\" id=\"\" class=\"form-select\" \r\n                    (change)=\"createTableRows()\">\r\n                    <option value=\"\">-- Sub Function --</option>\r\n                    <option [ngValue]=\"item\" *ngFor=\"let item of subFunctionsDropDown\">{{item}}</option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n        <div class=\"white_box_tittle list_header\">\r\n            <div class=\"QA_table \">\r\n                <div class=\"dataTables_wrapper\">\r\n                    <table class=\"table no-footer dtr-inline collapsed\" role=\"grid\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th></th>\r\n                                <th *ngFor=\"let item of roleAccessData\">{{item.roleMasterDTO.roleDescription}}</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor=\"let action_item of actionTypes; index as i\">\r\n                                <td>{{action_item.accessType.charAt(0).toUpperCase() +\r\n                                    action_item.accessType.substring(1)}}\r\n                                </td>\r\n                                <td *ngFor=\"let role_item of roleAccessData; index as role_index\">\r\n                                    <label class=\"primary_checkbox d-flex mr-12 \">\r\n                                        <input type=\"checkbox\" [checked]=\"checkStatus(\r\n                                                action_item.subFunctionMasterId, role_index)\" (change)=\"assignAccess(\r\n                                                action_item.subFunctionMasterId, role_index, $event)\">\r\n                                        <span class=\"checkmark\"></span>\r\n                                    </label>\r\n\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"row\" *ngIf=\"selectedSubFunction\">\r\n            <div class=\"col-md-4\">\r\n                <button type=\"button\" class=\"btn btn-primary\" (click)=\"save()\">Save</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { RoleAccessComponent } from './role-access.component';\r\n\r\nconst routes: Routes = [{ path: '', component: RoleAccessComponent },];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class RoleAccessRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { RoleAccessRoutingModule } from './role-access-routing.module';\r\nimport { RoleAccessComponent } from './role-access.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [RoleAccessComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RoleAccessRoutingModule\r\n  ]\r\n})\r\nexport class RoleAccessModule { }\r\n"],"sourceRoot":"webpack:///"}