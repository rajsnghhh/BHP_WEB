<app-loader [hidden]="loader"></app-loader>
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="white_box QA_section mb_30">
                <h2 class="page-title">Daily Activity Record</h2>

                <div class="row">
                    <!-- *ngIf="(roleAccess !='HCO') &&
                (darListByBranchID?.length>0 || darListByRegionID?.length>0)" -->
                    <div class="form-group col-md">
                        <button type="button" class="btn btn-success btn-sm" (click)="downloadExcelReport()"
                            style="float:right;margin-right: 8px;margin-top: -55px;"
                            [disabled]="!disabledFetchReport()"><i class="fas fa-solid fa-file-excel"></i>
                            Download Excel
                        </button>
                    </div>
                </div>

                <form class="form-signin" [formGroup]="darForm">
                    <div class="row" *ngIf="regionBranchHide">
                        <div class="form-group col-md">
                            <label for="region">Region :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                            <select class="form-select" (change)="changeRegion($event.target.value)"
                                formControlName="region" id="region" [ngClass]="{'is-invalid': l.region.invalid && l.region.touched,
                              'is-valid': l.region.valid && (l.region.dirty || l.region.touched) }">
                                <option value="">-- Select Region --</option>
                                <option *ngFor="let region of regionList" value="{{region.regionMasterId}}">
                                    {{region.regionName}}
                                </option>
                            </select>
                            <div *ngIf="l.region.errors" class="invalid-feedback">
                                <div *ngIf="l.region.errors.required">Region selection is required</div>
                            </div>
                        </div>

                        <div class="form-group col-md">
                            <label for="branch">Branch :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                            <select class="form-select" formControlName="branch" id="branch" (change)="changeBranch()"
                                [ngClass]="{'is-invalid': l.branch.invalid
                             && l.branch.touched,  'is-valid': l.branch.valid && (l.branch.dirty || l.branch.touched) }">
                                <option value="">-- Select Branch --</option>
                                <option value="allBranches" *ngIf="darForm.value.region">All Branches</option>
                                <option *ngFor="let branch of branchList" value="{{branch.branchId}}">
                                    {{ branch.branchName }}
                                </option>
                            </select>
                            <div *ngIf="l.branch.errors" class="invalid-feedback">
                                <div *ngIf="l.branch.errors.required">Branch selection is required</div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- <div class="form-group col-md" *ngIf="roleAccess!='HCO'">
                            <label for="hco">HCO/ HCOI/ TL :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                            <select class="form-select" formControlName="hco" id="hco" [ngClass]="{'is-invalid': l.hco.invalid && l.hco.touched, 'is-valid': l.hco.valid && 
                                (l.hco.dirty || l.hco.touched) }" (change)="changeHco($event.target.value)">
                                <option value="">-- Select Role --</option>
                                <option value="allStaffs">All Staffs</option>
                                <option *ngFor="let hco of HcoITLList" value='{{hco.user_id}}'>
                                    {{ hco.user_firstname}} {{hco.user_middlename}} {{hco.user_lastname}} -
                                    {{hco.role_shortname}}
                                </option>
                            </select>
                            <div *ngIf="l.hco.errors" class="invalid-feedback">
                                <div *ngIf="l.hco.errors.required">Role selection is required</div>
                            </div>
                        </div> -->

                        <div class="form-group col-md">
                            <label for="fromDate">From Date :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                            <input type="date" class="form-control" formControlName="fromDate"
                                (keydown)="restrictTypeOfDate()" (change)="fromDateExpectToDate($event)"
                                [ngClass]="{'is-invalid': l.fromDate.invalid
                                && l.fromDate.touched,'is-valid': l.fromDate.valid && (l.fromDate.dirty || l.fromDate.touched) }">
                            <div *ngIf="l.fromDate.errors" class="invalid-feedback">
                                <div *ngIf="l.fromDate.errors.required">From Date selection is required</div>
                            </div>
                        </div>

                        <div class="form-group col-md">
                            <label for="toDate">To Date :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                            <input type="date" class="form-control" formControlName="toDate"
                                (keydown)="restrictTypeOfDate()" (change)="toDateChange()" [ngClass]="{'is-invalid': l.toDate.invalid && 
                                l.toDate.touched,'is-valid': l.toDate.valid && (l.toDate.dirty || l.toDate.touched) }"
                                [min]="minToDate" [max]="maxToDate">
                            <div *ngIf="l.toDate.errors" class="invalid-feedback">
                                <div *ngIf="l.toDate.errors.required">To Date selection is required</div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group col-md">
                                <button type="button" class="btn btn-primary btn-sm" (click)="fetchReport()"
                                    style="float:right;margin-right: -22px;" [disabled]="!disabledFetchReport()">
                                    Fetch Report
                                </button>
                            </div>
                        </div>
                    </div>

                </form>

                <div class="white_box_tittle list_header"
                    *ngIf="roleAccess == 'HCO' && dateWiseStaffDarDetails?.length>0">
                    <div class="QA_table">
                        <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper no-footer">
                            <table
                                class="table lms_table_active dataTable no-footer dtr-inline collapsed table table-striped"
                                role="grid" aria-describedby="DataTables_Table_0_info" style="table-layout: fixed;">

                                <thead>
                                    <tr>
                                        <th style="font-size: 13px;width: 16%;">Date</th>
                                        <th style="font-size: 13px;width: 8%;">Total<br>Family<br>Visited</th>
                                        <th style="font-size: 13px;width: 8%;">PW<br>Family</th>
                                        <th style="font-size: 13px;width: 8%;">LM<br>Family</th>
                                        <th style="font-size: 13px;width: 9%;">LM<br>Children</th>
                                        <th style="font-size: 13px;width: 8%;">PEM<br>Family</th>
                                        <th style="font-size: 13px;width: 9%;">RED<br>Children</th>
                                        <th style="font-size: 13px;width: 9%;">YELLOW<br>Children</th>
                                        <th style="font-size: 13px;width: 11%;">General<br>Family<br>(2 to 5yr)</th>
                                        <th style="font-size: 13px;width: 12%;">General<br>Family<br>(Ado. Girl)</th>
                                        <th style="font-size: 13px;width: 9%;">General<br>Other</th>
                                        <th style="font-size: 13px;width: 9%;">Target<br>Family<br>Visited<br>With SS
                                        </th>
                                        <th style="font-size: 13px;width: 10%;">General<br>Family<br>Visited<br>With SS
                                        </th>
                                        <th style="font-size: 13px;width: 11%;">SS<br>Followed<br>Up</th>
                                        <th style="font-size: 13px;width: 8%;">SS<br>Names</th>
                                        <th style="font-size: 13px;width: 11%;">Families<br>Escorted</th>
                                        <th style="font-size: 13px;width: 12%;">Material<br>Distributed<br>Families
                                        </th>
                                        <th style="font-size: 13px;width: 13%;">Refreshers<br>Training<br>Completed
                                        </th>
                                        <th style="font-size: 13px;width: 12%;">Refreshers<br>Training
                                            <br>Completed<br>SS
                                        </th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr *ngFor="let item of dateWiseStaffDarDetails;index as i">
                                        <td style="font-size: 13px;width: 16%;">
                                            {{item.date.split("-").reverse().join("-")}}</td>
                                        <td style="font-size: 13px;width: 8%;">{{item.totalFamilyVisited}}</td>
                                        <td style="font-size: 13px;width: 8%;">{{item.pwCounsellingFamily}}</td>
                                        <td style="font-size: 13px;width: 8%;">{{item.lmCounsellingFamily}}</td>
                                        <td style="font-size: 13px;width: 9%;">{{item.lmChildrenCounselling}}</td>
                                        <td style="font-size: 13px;width: 8%;">{{item.pemCounsellingFamily}}</td>
                                        <td style="font-size: 13px;width: 9%;">{{item.redChildrenCounselling}}</td>
                                        <td style="font-size: 13px;width: 9%;">{{item.yellowChildrenCounselling}}</td>
                                        <td style="font-size: 13px;width: 9%;">{{item.generalFamilyCounselling2to5}}
                                        </td>
                                        <td style="font-size: 13px;width: 12%;">
                                            {{item.generalFamilyCounsellingAdolescent}}</td>
                                        <td style="font-size: 13px;width: 9%;">{{item.generalFamilyOther}}</td>
                                        <td style="font-size: 13px;width: 9%;">{{item.targetFamiliesVisitedWithSS}}</td>
                                        <td style="font-size: 13px;width: 9%;">{{item.generalFamiliesVisitedWithSS}}
                                        </td>
                                        <td style="font-size: 13px;width: 11%;">{{item.ssFollowUpAnsweredVisited}}</td>

                                        <td style="font-size: 13px;width: 8%;">
                                            <div class="popover__wrapper">
                                                <h3 class="popover__title" *ngIf="item.followUpSSDetails.length>0"
                                                    (click)="viewSSName(item, ssNames)">view</h3>
                                                <h3 class="popover__title" *ngIf="item.followUpSSDetails.length==0">view
                                                </h3>
                                                <div class="popover__content" *ngIf="item.followUpSSDetails.length==0">
                                                    <div class="card-header">No SS Mapped
                                                    </div>
                                                </div>
                                            </div>
                                        </td>

                                        <td style="font-size: 13px;width: 11%;">
                                            {{item.escortingFamilyToHealthCareCenter}}</td>
                                        <td style="font-size: 13px;width: 12%;">{{item.materialDistributedToFamilies}}
                                        </td>
                                        <td style="font-size: 13px;width: 13%;">
                                            {{item.refresherTrainingCompletedOnDate}}</td>
                                        <td style="font-size: 13px;width: 12%;">{{item.refresherTrainingCompletedBySS}}
                                        </td>
                                    </tr>

                                    <tr *ngFor="let dar of darListByStaffID;index as i">
                                        <td style="color: #666666;font-size: 13px;width: 16%;">
                                            <strong>Cumulative</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{dar.totalFamilyVisitedSum}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{dar.pwCounsellingFamilySum}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{dar.lmCounsellingFamilySum}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;"><strong>-</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{dar.pemCounsellingFamilySum}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;"><strong>-</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;"><strong>-</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;">
                                            <strong>{{dar.generalFamilyCounselling2to5Sum}}
                                            </strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 12%;"><strong>
                                                {{dar.generalFamilyCounsellingAdolescentSum}}</strong></td>
                                        <td style="color: #666666;font-size: 13px;width:9%;">
                                            <strong>{{dar.generalFamilyOtherSum}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width:9%;">
                                            <strong>{{dar.targetFamiliesVisitedWithSSSum}}
                                            </strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width:9%;">
                                            <strong>{{dar.generalFamiliesVisitedWithSSSum}}
                                            </strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 11%;"><strong>-</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;"> <strong>-</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 11%;"><strong>
                                                {{dar.escortingFamilyToHealthCareCenterSum}}</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 12%;">
                                            <strong>{{dar.materialDistributedToFamiliesSum}}
                                            </strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 13%;"><strong>-</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 12%;"><strong>-</strong></td>
                                    </tr>

                                    <tr *ngFor="let dar of darListByStaffID;index as i">
                                        <td style="color: #666666;font-size: 13px;width: 16%;">
                                            <strong>Unique</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{dar.totalFamilyVisitedUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{dar.pwCounsellingFamilyUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{dar.lmCounsellingFamilyUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;">
                                            <strong>{{dar.lmChildrenCounsellingUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{dar.pemCounsellingFamilyUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;">
                                            <strong>{{dar.redChildrenCounsellingUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;">
                                            <strong>{{dar.yellowChildrenCounsellingUnique}}
                                            </strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;"><strong>
                                                {{dar.generalFamilyCounselling2to5Unique}}</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 12%;"><strong>
                                                {{dar.generalFamilyCounsellingAdolescentUnique}}</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;">
                                            <strong>{{dar.generalFamilyOtherUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;">
                                            <strong>{{dar.targetFamiliesVisitedWithSSUnique}}
                                            </strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;"><strong>
                                                {{dar.generalFamiliesVisitedWithSSUnique}}</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 11%;">
                                            <strong>{{dar.ssFollowUpAnsweredVisitedUnique}}
                                            </strong>
                                        </td>

                                        <td style="font-size: 13px;width: 8%;">
                                            <div class="popover__wrapper">
                                                <h3 class="popover__title" *ngIf="dar.followUpSSDetailsUnique?.length>0"
                                                    (click)="viewSSName(dar, ssNames)">view</h3>
                                                <h3 class="popover__title"
                                                    *ngIf="dar.followUpSSDetailsUnique?.length==0">view</h3>
                                                <div class="popover__content"
                                                    *ngIf="dar.followUpSSDetailsUnique?.length==0">
                                                    <div class="card-header">No SS Mapped </div>
                                                </div>
                                            </div>
                                        </td>

                                        <td style="color: #666666;font-size: 13px;width: 11%;"><strong>
                                                {{dar.escortingFamilyToHealthCareCenterUnique}}</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 12%;"><strong>
                                                {{dar.materialDistributedToFamiliesUnique}}</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 13%;"><strong>-</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 12%;"><strong>-</strong>
                                        </td>
                                    </tr>

                                </tbody>

                            </table>
                        </div>
                    </div>
                </div>

                <div class="white_box_tittle list_header" *ngIf="(roleAccess !='HCO') &&
                (darListByBranchID?.length>0 || darListByRegionID?.length>0)">
                    <div class=" QA_table">
                        <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper no-footer">
                            <table
                                class="table lms_table_active dataTable no-footer dtr-inline collapsed table table-striped"
                                role="grid" aria-describedby="DataTables_Table_0_info" style="table-layout: fixed;">

                                <thead>
                                    <tr>
                                        <th style="font-size: 13px;width: 13%;">Staff<br>Name</th>
                                        <th style="font-size: 13px;width: 12%;">Type</th>
                                        <th style="font-size: 13px;width: 9%;">Total<br>Family<br>Visited</th>
                                        <th style="font-size: 13px;width: 8%;">PW<br>Family</th>
                                        <th style="font-size: 13px;width: 8%;">LM<br>Family</th>
                                        <th style="font-size: 13px;width: 10%;">LM<br>Children</th>
                                        <th style="font-size: 13px;width: 8%;">PEM<br>Family</th>
                                        <th style="font-size: 13px;width: 10%;">RED<br>Children</th>
                                        <th style="font-size: 13px;width: 10%;">YELLOW<br>Children</th>
                                        <th style="font-size: 13px;width: 11%;">General<br>Family<br>(2 to 5yr)</th>
                                        <th style="font-size: 13px;width: 12%;">General<br>Family<br>(Ado. Girl)</th>
                                        <th style="font-size: 13px;width: 9%;">General<br>Other</th>
                                        <th style="font-size: 13px;width: 10%;">Target<br>Family<br>Visited<br>With SS
                                        </th>
                                        <th style="font-size: 13px;width: 10%;">General<br>Family<br>Visited<br>With SS
                                        </th>
                                        <th style="font-size: 13px;width: 11%;">SS<br>Followed<br>Up</th>
                                        <th style="font-size: 13px;width: 8%;">SS<br>Names</th>
                                        <th style="font-size: 13px;width: 10%;">Families<br>Escorted</th>
                                        <th style="font-size: 13px;width: 13%;">Material<br>Distributed<br>Families
                                        </th>
                                        <th style="font-size: 13px;width: 13%;">Refreshers<br>Training<br>Completed
                                        </th>
                                        <th style="font-size: 13px;width: 14%;">
                                            Refreshers<br>Training<br>Completed<br>SS
                                        </th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr *ngFor="let item of viewDARByRegionBranch;index as i">
                                        <td class="btn-link" style="font-size: 13px;width: 13%;word-wrap: break-word;
                                            color:#0d6efd; text-decoration: none; cursor: pointer;"
                                            (click)="staffClickDateWiseRecords(item, staffDateWiseRecords)">
                                            {{item.staffName}}</td>
                                        <td style="font-size: 13px;width: 12%;">Cum.<br>
                                            Unique
                                        </td>
                                        <td style="font-size: 13px;width: 9%;">
                                            {{item.totalFamilyVisitedSum}}<br>
                                            {{item.totalFamilyVisitedUnique}}
                                        </td>
                                        <td style="font-size: 13px;width: 8%;">
                                            {{item.pwCounsellingFamilySum}}<br>
                                            {{item.pwCounsellingFamilyUnique}}
                                        </td>
                                        <td style="font-size: 13px;width: 8%;">
                                            {{item.lmCounsellingFamilySum}}<br>
                                            {{item.lmCounsellingFamilyUnique}}
                                        </td>
                                        <td style="font-size: 13px;width: 10%;">-<br>
                                            {{item.lmChildrenCounsellingUnique}}
                                        </td>
                                        <td style="font-size: 13px;width: 8%;">
                                            {{item.pemCounsellingFamilySum}}<br>
                                            {{item.pemCounsellingFamilyUnique}}
                                        </td>
                                        <td style="font-size: 13px;width: 10%;">
                                            -<br>
                                            {{item.redChildrenCounsellingUnique}}
                                        </td>
                                        <td style="font-size: 13px;width: 10%;">
                                            -<br>
                                            {{item.yellowChildrenCounsellingUnique}}
                                        </td>
                                        <td style="font-size: 13px;width: 10%;">
                                            {{item.generalFamilyCounselling2to5Sum}}<br>
                                            {{item.generalFamilyCounselling2to5Unique}}
                                        </td>
                                        <td style="font-size: 13px;width: 13%;">
                                            {{item.generalFamilyCounsellingAdolescentSum}}<br>
                                            {{item.generalFamilyCounsellingAdolescentUnique}}
                                        </td>
                                        <td style="font-size: 13px;width: 9%;">
                                            {{item.generalFamilyOtherSum}}<br>
                                            {{item.generalFamilyOtherUnique}}
                                        </td>
                                        <td style="font-size: 13px;width: 10%;">
                                            {{item.targetFamiliesVisitedWithSSSum}}<br>
                                            {{item.targetFamiliesVisitedWithSSUnique}}
                                        </td>
                                        <td style="font-size: 13px;width: 9%;">
                                            {{item.generalFamiliesVisitedWithSSSum}}<br>
                                            {{item.generalFamiliesVisitedWithSSUnique}}
                                        </td>
                                        <td style="font-size: 13px;width: 12%;">
                                            -<br>
                                            {{item.ssFollowUpAnsweredVisitedUnique}}
                                        </td>

                                        <td style="font-size: 13px;width: 8%;">
                                            <strong>-</strong>
                                            <br>

                                            <div class="popover__wrapper">
                                                <h3 class="popover__title" *ngIf="item.followUpSSDetailsUnique.length>0"
                                                    (click)="viewSSName(item, ssNames)">view</h3>
                                                <h3 class="popover__title"
                                                    *ngIf="item.followUpSSDetailsUnique?.length==0">view
                                                </h3>
                                                <div class="popover__content"
                                                    *ngIf="item.followUpSSDetailsUnique?.length==0">
                                                    <div class="card-header">No SS Mapped
                                                    </div>
                                                </div>
                                            </div>

                                        </td>

                                        <td style="font-size: 13px;width: 10%;">
                                            {{item.escortingFamilyToHealthCareCenterSum}}<br>
                                            {{item.escortingFamilyToHealthCareCenterUnique}}
                                        </td>
                                        <td style="font-size: 13px;width: 13%;">
                                            {{item.materialDistributedToFamiliesSum}}<br>
                                            {{item.materialDistributedToFamiliesUnique}}
                                        </td>
                                        <td style="font-size: 13px;width: 13%;">-<br>
                                            -
                                        </td>
                                        <td style="font-size: 13px;width: 14%;">-<br>
                                            -
                                        </td>
                                    </tr>

                                </tbody>

                            </table>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<ng-template #staffDateWiseRecords>

    <div class="modal-content">
        <div class="modal-header">

            <div class="col-md">
                <h3 class="modal-title" id="modal-basic-title">Staff Date Wise Records</h3>
            </div>
            <div class="col-md">
                <span class="close" (click)="staffDateWiseRecordsModalDismiss()"
                    style="cursor: pointer;font-size: 35px;float: right; margin-top: -25px;">&times;</span>
            </div>

        </div>

        <div class="modal-body">
            <div class="white_box_tittle list_header">

                <div class="white_box_tittle list_header">
                    <div class="QA_table">
                        <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper no-footer">
                            <table
                                class="table lms_table_active dataTable no-footer dtr-inline collapsed table table-striped"
                                role="grid" aria-describedby="DataTables_Table_0_info" style="table-layout: fixed;">

                                <thead>
                                    <tr>
                                        <th style="font-size: 13px;width: 16%;">Date</th>
                                        <th style="font-size: 13px;width: 8%;">Total<br>Family<br>Visited</th>
                                        <th style="font-size: 13px;width: 8%;">PW<br>Family</th>
                                        <th style="font-size: 13px;width: 8%;">LM<br>Family</th>
                                        <th style="font-size: 13px;width: 9%;">LM<br>Children</th>
                                        <th style="font-size: 13px;width: 8%;">PEM<br>Family</th>
                                        <th style="font-size: 13px;width: 9%;">RED<br>Children</th>
                                        <th style="font-size: 13px;width: 9%;">YELLOW<br>Children</th>
                                        <th style="font-size: 13px;width: 9%;">General<br>Family<br>(2 to 5yr)</th>
                                        <th style="font-size: 13px;width: 12%;">General<br>Family<br>(Ado. Girl)</th>
                                        <th style="font-size: 13px;width: 9%;">General<br>Other</th>
                                        <th style="font-size: 13px;width: 9%;">Target<br>Family<br>Visited<br>With SS
                                        </th>
                                        <th style="font-size: 13px;width: 9%;">General<br>Family<br>Visited<br>With SS
                                        </th>
                                        <th style="font-size: 13px;width: 11%;">SS<br>Followed<br>Up</th>
                                        <th style="font-size: 13px;width: 8%;">SS<br>Names</th>
                                        <th style="font-size: 13px;width: 10%;">Families<br>Escorted</th>
                                        <th style="font-size: 13px;width: 12%;">Material<br>Distributed<br>Families
                                        </th>
                                        <th style="font-size: 13px;width: 13%;">Refreshers<br>Training<br>Completed
                                        </th>
                                        <th style="font-size: 13px;width: 12%;">
                                            Refreshers<br>Training<br>Completed<br>SS
                                        </th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr *ngFor="let item of dateWiseStaffDarDetails;index as i">
                                        <td style="font-size: 13px;width: 16%;">
                                            {{item.date.split("-").reverse().join("-")}}</td>
                                        <td style="font-size: 13px;width: 8%;">{{item.totalFamilyVisited}}</td>
                                        <td style="font-size: 13px;width: 8%;">{{item.pwCounsellingFamily}}</td>
                                        <td style="font-size: 13px;width: 8%;">{{item.lmCounsellingFamily}}</td>
                                        <td style="font-size: 13px;width: 9%;">{{item.lmChildrenCounselling}}</td>
                                        <td style="font-size: 13px;width: 8%;">{{item.pemCounsellingFamily}}</td>
                                        <td style="font-size: 13px;width: 9%;">{{item.redChildrenCounselling}}</td>
                                        <td style="font-size: 13px;width: 9%;">{{item.yellowChildrenCounselling}}</td>
                                        <td style="font-size: 13px;width: 9%;">{{item.generalFamilyCounselling2to5}}
                                        </td>
                                        <td style="font-size: 13px;width: 12%;">
                                            {{item.generalFamilyCounsellingAdolescent}}</td>
                                        <td style="font-size: 13px;width: 9%;">{{item.generalFamilyOther}}</td>
                                        <td style="font-size: 13px;width: 9%;">{{item.targetFamiliesVisitedWithSS}}</td>
                                        <td style="font-size: 13px;width: 9%;">{{item.generalFamiliesVisitedWithSS}}
                                        </td>
                                        <td style="font-size: 13px;width: 10%;">{{item.ssFollowUpAnsweredVisited}}</td>
                                        <td style="font-size: 13px;width: 8%;">

                                            <div class="popover__wrapper">
                                                <h3 class="popover__title" *ngIf="item.followUpSSDetails.length>0"
                                                    (click)="viewSSName(item, ssNames)">view</h3>
                                                <h3 class="popover__title" *ngIf="item.followUpSSDetails?.length==0">
                                                    view
                                                </h3>
                                                <div class="popover__content" *ngIf="item.followUpSSDetails?.length==0">
                                                    <div class="card-header">No SS Mapped
                                                    </div>
                                                </div>
                                            </div>

                                        </td>
                                        <td style="font-size: 13px;width: 10%;">
                                            {{item.escortingFamilyToHealthCareCenter}}</td>
                                        <td style="font-size: 13px;width: 12%;">{{item.materialDistributedToFamilies}}
                                        </td>
                                        <td style="font-size: 13px;width: 13%;">
                                            {{item.refresherTrainingCompletedOnDate}}</td>
                                        <td style="font-size: 13px;width: 12%;">{{item.refresherTrainingCompletedBySS}}
                                        </td>
                                    </tr>

                                    <tr>
                                        <td style="color: #666666;font-size: 13px;width: 16%;">
                                            <strong>Cumulative</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{cumUniqueOnStaffClick.totalFamilyVisitedSum}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{cumUniqueOnStaffClick.pwCounsellingFamilySum}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{cumUniqueOnStaffClick.lmCounsellingFamilySum}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;"><strong>-</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{cumUniqueOnStaffClick.pemCounsellingFamilySum}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;"><strong>-</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;"><strong>-</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;">
                                            <strong>{{cumUniqueOnStaffClick.generalFamilyCounselling2to5Sum}}
                                            </strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 12%;"><strong>
                                                {{cumUniqueOnStaffClick.generalFamilyCounsellingAdolescentSum}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width:9%;">
                                            <strong>{{cumUniqueOnStaffClick.generalFamilyOtherSum}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width:9%;">
                                            <strong>{{cumUniqueOnStaffClick.targetFamiliesVisitedWithSSSum}}
                                            </strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width:9%;">
                                            <strong>{{cumUniqueOnStaffClick.generalFamiliesVisitedWithSSSum}}
                                            </strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 10%;"><strong>-</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            -
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 10%;"><strong>
                                                {{cumUniqueOnStaffClick.escortingFamilyToHealthCareCenterSum}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 12%;">
                                            <strong>{{cumUniqueOnStaffClick.materialDistributedToFamiliesSum}}
                                            </strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 13%;"><strong>-</strong></td>
                                        <td style="color: #666666;font-size: 13px;width: 12%;"><strong>-</strong></td>
                                    </tr>

                                    <tr>
                                        <td style="color: #666666;font-size: 13px;width: 16%;">
                                            <strong>Unique</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{cumUniqueOnStaffClick.totalFamilyVisitedUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{cumUniqueOnStaffClick.pwCounsellingFamilyUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{cumUniqueOnStaffClick.lmCounsellingFamilyUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;">
                                            <strong>{{cumUniqueOnStaffClick.lmChildrenCounsellingUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">
                                            <strong>{{cumUniqueOnStaffClick.pemCounsellingFamilyUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;">
                                            <strong>{{cumUniqueOnStaffClick.redChildrenCounsellingUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;">
                                            <strong>{{cumUniqueOnStaffClick.yellowChildrenCounsellingUnique}}
                                            </strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;"><strong>
                                                {{cumUniqueOnStaffClick.generalFamilyCounselling2to5Unique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 12%;"><strong>
                                                {{cumUniqueOnStaffClick.generalFamilyCounsellingAdolescentUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;">
                                            <strong>{{cumUniqueOnStaffClick.generalFamilyOtherUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;">
                                            <strong>{{cumUniqueOnStaffClick.targetFamiliesVisitedWithSSUnique}}
                                            </strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 9%;"><strong>
                                                {{cumUniqueOnStaffClick.generalFamiliesVisitedWithSSUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 10%;">
                                            <strong>{{cumUniqueOnStaffClick.ssFollowUpAnsweredVisitedUnique}}
                                            </strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 8%;">

                                            <div class="popover__wrapper">
                                                <h3 class="popover__title"
                                                    *ngIf="cumUniqueOnStaffClick.followUpSSDetailsUnique.length>0"
                                                    (click)="viewSSName(cumUniqueOnStaffClick, ssNames)">view</h3>
                                                <h3 class="popover__title"
                                                    *ngIf="cumUniqueOnStaffClick.followUpSSDetailsUnique.length==0">
                                                    view
                                                </h3>
                                                <div class="popover__content"
                                                    *ngIf="cumUniqueOnStaffClick.followUpSSDetailsUnique.length==0">
                                                    <div class="card-header">No SS Mapped
                                                    </div>
                                                </div>
                                            </div>

                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 10%;"><strong>
                                                {{cumUniqueOnStaffClick.escortingFamilyToHealthCareCenterUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 12%;"><strong>
                                                {{cumUniqueOnStaffClick.materialDistributedToFamiliesUnique}}</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 13%;"><strong>-</strong>
                                        </td>
                                        <td style="color: #666666;font-size: 13px;width: 12%;"><strong>-</strong>
                                        </td>
                                    </tr>

                                </tbody>

                            </table>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>

</ng-template>


<ng-template #ssNames>

    <div class="modal-contents">
        <div class="modal-header">

            <div class="col-md">
                <h3 class="modal-title" id="modal-basic-title"><span *ngIf="ssDateOrUniqueShow.date">Date:</span>
                    <span *ngIf="!ssDateOrUniqueShow.date">Staff Name:</span>
                    {{ssDateOrUniqueShow.date ?
                    ssDateOrUniqueShow.date.split("-").reverse().join("-"): ssDateOrUniqueShow.staffName}}
                </h3>
            </div>

            <div class="col-md">
                <span class="close" (click)="ssViewModalDismiss()"
                    style="cursor: pointer;font-size: 35px;float: right; margin-top: -25px;">&times;</span>
            </div>

        </div>

        <div class="modal-body">
            <div class="white_box_tittle list_header">

                <div class="white_box_tittle list_header">
                    <div class="QA_table">
                        <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper no-footer">
                            <table
                                class="table lms_table_active dataTable no-footer dtr-inline collapsed table table-striped"
                                role="grid" aria-describedby="DataTables_Table_0_info" style="table-layout: fixed;">

                                <thead >
                                    <tr>
                                        <th style="width: 8%;">Sl. No.</th>
                                        <th style="width: 25%;">SS Name</th>
                                    </tr>
                                </thead>

                                <tbody style="height: 115px;">
                                    <tr *ngFor="let item of ssDetails;index as i">
                                        <td style="width: 8%;">{{i+1}}</td>
                                        <td style="width: 25%;">{{item.ss_name}}</td>
                                    </tr>

                                </tbody>

                            </table>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>

</ng-template>