<app-loader [hidden]="loader"></app-loader>
<h1 mat-dialog-title>
    <div class="dialog-header">
        <h3 class="dialog-title">{{dialogTitle}}</h3>
        <div><i class="fas fa-times" (click)="closeDialog()"></i></div>
    </div>
</h1>
<hr>


<div mat-dialog-content style="overflow-y: auto; height: 400px; overflow-x: hidden;">
    <form class="form-signin" [formGroup]="createEventRegisterForm">

        <div class="row">
            <div class="form-group col-md-6">
                <label for="eventType">Event Types :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                <select class="form-select" (change)="changeEventTypes($event.target.value)" formControlName="eventType"
                    id="eventType" [ngClass]="{'is-invalid': l.eventType.invalid && l.eventType.touched,
                  'is-valid': l.eventType.valid && (l.eventType.dirty || l.eventType.touched) }">
                    <option value="">-- Select Event Types --</option>
                    <option *ngFor="let event of eventTypeLists" value="{{event.eventTypeMasterId}}">
                        {{event.eventName}}
                    </option>
                </select>
                <div *ngIf="l.eventType.errors" class="invalid-feedback">
                    <div *ngIf="l.eventType.errors.required">Please select a Event</div>
                </div>
            </div>
        </div>

        <!-- School Events -->
        <div *ngIf="event_is_special == 'N'">

            <div class="row">
                <div class="form-group col-md">
                    <label for="schoolName">School Name :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                    <input type="text" class="form-control" placeholder="Enter School Name" formControlName="schoolName"
                        maxlength="100" minlength="3" (keypress)="validationService.onlyAlphabetsAndSpace($event)"
                        style="text-transform: capitalize" [ngClass]="{'is-invalid': l.schoolName.invalid && l.schoolName.touched,
                'is-valid':l.schoolName.valid &&(l.schoolName.dirty || l.schoolName.touched)}" />
                    <div *ngIf="l.schoolName.errors" class="invalid-feedback">
                        <div *ngIf="l.schoolName.errors.required">
                            Please Enter School Name
                        </div>
                        <div *ngIf="l.schoolName.errors.minlength">
                            Minimum length should be 3
                        </div>
                    </div>
                </div>

                <div class="form-group col-md">
                    <label for="schoolType">School Type :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                    <select class="form-select" formControlName="schoolType" id="schoolType" [ngClass]="{'is-invalid':
                 l.schoolType.invalid && l.schoolType.touched, 'is-valid':
                 l.schoolType.valid && (l.schoolType.dirty || l.schoolType.touched) }">
                        <option value="">-- Select School Type --</option>
                        <option value="G">Government</option>
                        <option value="P">Private</option>
                    </select>
                    <div *ngIf="l.schoolType.errors" class="invalid-feedback">
                        <div *ngIf="l.schoolType.errors.required">Please select school type</div>
                    </div>
                </div>

            </div><br>

            <div class="row">
                <div class="form-group col-md">
                    <fieldset class="scheduler-borders">
                        <legend class="scheduler-border">School Place :&nbsp;<span class="text-danger">*&nbsp;</span>
                        </legend>
                        <div class="row">
                            <div class="form-group col-md">
                                <label for="block">Block :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                                <select class="form-select" (change)="changeBlock($event.target.value)"
                                    formControlName="block" id="block" [ngClass]="{'is-invalid':l.block.invalid
                                     && l.block.touched,'is-valid':l.block.valid &&
                                      (l.block.dirty ||l.block.touched) }">
                                    <option value="">-- Select Block --</option>
                                    <option *ngFor="let block of villagesOfBranch" value="{{block.blockMasterId}}">
                                        {{ block.blockName }}
                                    </option>
                                </select>
                                <div *ngIf="l.block.errors" class="invalid-feedback">
                                    <div *ngIf="l.block.errors.required">Block selection is required</div>
                                </div>
                            </div>

                            <div class="form-group col-md">
                                <label for="gp">GP/ Municipality :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                                <select class="form-select" (change)="changeGp($event.target.value)"
                                    formControlName="gp" id="gp" [ngClass]="{'is-invalid':l.gp.invalid && l.gp.touched,
                                           'is-valid':l.gp.valid && (l.gp.dirty || l.gp.touched) }">
                                    <option value="">-- Select GP --</option>
                                    <option *ngFor="let gp of gpList" value="{{gp.gpMunicipalId}}">
                                        {{ gp.name }}
                                    </option>
                                </select>
                                <div *ngIf="l.gp.errors" class="invalid-feedback">
                                    <div *ngIf="l.gp.errors.required">
                                        GP selection is required
                                    </div>
                                </div>
                            </div>

                            <div class="form-group col-md">
                                <label for="gram">Vill/ Gram Sansad/ Locality :&nbsp;<span
                                        class="text-danger">*&nbsp;</span></label>
                                <select class="form-select" formControlName="gram" id="gram" [ngClass]="{'is-invalid':l.gram.invalid && 
                                l.gram.touched,'is-valid':l.gram.valid && (l.gram.dirty ||l.gram.touched) }">
                                    <option value="">-- Select Village --</option>
                                    <option *ngFor="let vill of villageList" value="{{vill.villageMasterId}}">
                                        {{ vill.villageName }}
                                    </option>
                                </select>
                                <div *ngIf="l.gram.errors" class="invalid-feedback">
                                    <div *ngIf="l.gram.errors.required">
                                        Village selection is required
                                    </div>
                                </div>
                            </div>
                        </div>

                    </fieldset>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-md">
                    <label for="eventDate">Date of Event :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                    <input type="date" class="form-control" formControlName="eventDate" (keydown)="restrictTypeOfDate()"
                        [ngClass]="{'is-invalid': l.eventDate.invalid 
                    && l.eventDate.touched, 'is-valid':l.eventDate.valid &&(l.eventDate.dirty || l.eventDate.touched)}"
                        [min]="minToDate" [max]="maxToDate" />
                    <div *ngIf="l.eventDate.errors" class="invalid-feedback">
                        <div *ngIf="l.eventDate.errors.required">
                            Please select event date
                        </div>
                    </div>
                </div>

                <div class="form-group col-md">
                    <label for="issueType">Issue Addressed :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                    <select class="form-select" formControlName="issueType" id="issueType" [ngClass]="{'is-invalid': 
                       l.issueType.invalid && l.issueType.touched,
                      'is-valid': l.issueType.valid && (l.issueType.dirty || l.issueType.touched) }">
                        <option value="">-- Select Issue Addressed --</option>
                        <option *ngFor="let issue of issuesList" value="{{issue.eventIssueMasterId}}">
                            {{issue.issueName}}
                        </option>
                    </select>
                    <div *ngIf="l.issueType.errors" class="invalid-feedback">
                        <div *ngIf="l.issueType.errors.required">Please select a Issue</div>
                    </div>
                </div>
            </div><br>

            <div class="row">
                <div class="form-group col-md">
                    <fieldset class="scheduler-border">
                        <legend class="scheduler-border">Staff/ Role/ Branch :&nbsp;<span
                                class="text-danger">*&nbsp;</span></legend>
                        <div id="tbodyStaff">
                            <div id="table_wrapper">
                                <table class="table table-striped" id="table_wrapper">

                                    <tbody style="text-align:center;">
                                        <tr *ngFor="let user of hcoUserList; index as i">
                                            <td style="width: 4%;">{{i+1}}</td>
                                            <td style="width: 25%;">{{user.user_firstname}}{{user.user_middlename}}
                                                {{user.user_lastname}} ({{user.role_shortname}}) -
                                                {{user.branch_name?user.branch_name:'NA'}}
                                            </td>
                                            <td style="width: 5%;"> <input
                                                    *ngIf="user.is_checked== true && specificEventDetails?.modalType!='view'"
                                                    class="form-check-input" type="checkbox" value=""
                                                    id="flexCheckDefault" checked
                                                    (change)="selectMultipleStaff($event,user)">
                                                <input
                                                    *ngIf="user.is_checked== false  && specificEventDetails?.modalType!='view'"
                                                    class="form-check-input" type="checkbox" value=""
                                                    id="flexCheckDefault" (change)="selectMultipleStaff($event,user)">
                                                <input
                                                    *ngIf="user.is_checked== true  && specificEventDetails?.modalType=='view'"
                                                    class="form-check-input" type="checkbox" value=""
                                                    id="flexCheckDefault" checked
                                                    (change)="selectMultipleStaff($event,user)" disabled>
                                                <input
                                                    *ngIf="user.is_checked== false  && specificEventDetails?.modalType=='view'"
                                                    class="form-check-input" type="checkbox" value=""
                                                    id="flexCheckDefault" (change)="selectMultipleStaff($event,user)"
                                                    disabled>
                                            </td>
                                        </tr>
                                        <tr *ngIf="hcoUserList.length == 0">
                                            <td colspan="6">No list is available.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-md-6">

                    <div class="card" style="background: whitesmoke; border: none;
                                        border-radius: 14px; height: 200px;">
                        <div class="card-body" style="height: 40vh;">
                            <h4 class="card-title">Facilitator :&nbsp;<span class="text-danger">*&nbsp;</span></h4>
                            <i class="fas fa-plus-circle" id="circle" (click)="addMoreFacilitator()" style="cursor: pointer; float: right;
                                            margin-top:-45px;" title="Add More Facilitator"
                                *ngIf="specificEventDetails?.modalType!='view'"></i>

                            <div id="table_wrapper">
                                <table class="table" id="table_wrapper">

                                    <tbody id="tbodyFaciliator" style="text-align:center;">
                                        <tr *ngFor="let items of facilitatorDetails.facilitatorInfo; index as i">
                                            <td> <input type="text" class="form-control" [attr.readonly]="isReadOnly"
                                                    (keypress)="validationService.onlyAlphabetsAndSpace($event)"
                                                    (keypress)="validationService.titleCase($event)"
                                                    placeholder="Facilitator Name" [ngModelOptions]="{standalone: true}"
                                                    [(ngModel)]="facilitatorDetails.facilitatorInfo[i].name"
                                                    style="width: 16rem;">
                                            </td>

                                            <td> <select class="form-select" [disabled]="isReadOnly"
                                                    [(ngModel)]="facilitatorDetails.facilitatorInfo[i].designationId"
                                                    [ngModelOptions]="{standalone: true}">
                                                    <option value="">-- Designation --</option>
                                                    <option *ngFor="let desig of designationList"
                                                        value="{{desig.eventDesignationMasterId}}">
                                                        {{ desig.designation}}
                                                    </option>
                                                </select>
                                            </td>

                                            <td><button type="button" class="btn btn-remove"
                                                    (click)="removeFacilitator(i)" style="width: 2rem;"
                                                    *ngIf="facilitatorDetails.facilitatorInfo[i].active_flag != 'D' && specificEventDetails?.modalType!='view'">
                                                    <i class="fas fa-minus-circle" style="color: red !important;
                                                        font-size: 20px;"></i>
                                                </button>
                                                <button type="button" class="btn btn-remove" style="width: 2rem;"
                                                    *ngIf="facilitatorDetails.facilitatorInfo[i].active_flag == 'D' && specificEventDetails?.modalType!='view'">
                                                    <i class="fas fa-minus-circle" style="color: #f57676 !important;
                                                    font-size: 20px;"></i>
                                                </button>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="form-group col-md-6">

                    <div class="card" style="background: whitesmoke; border: none;
                                        border-radius: 14px; height: 200px;">
                        <div class="card-body" style="height: 40vh;">
                            <h4 class="card-title">Stakeholder :</h4>
                            <i class="fas fa-plus-circle" id="circle" (click)="addMoreStakeHolder()" style="cursor: pointer; float: right;
                                            margin-top:-45px;" title="Add More Stakeholder"
                                *ngIf="specificEventDetails?.modalType!='view'"></i>

                            <div id="table_wrapper">
                                <table class="table" id="table_wrapper">

                                    <tbody id="tbodyFaciliator" style="text-align:center;">
                                        <tr *ngFor="let items of stakeHolderDetails.stakeHolderInfo; index as i">
                                            <td> <input type="text" class="form-control" [attr.readonly]="isReadOnly"
                                                    (keypress)="validationService.onlyAlphabetsAndSpace($event)"
                                                    (keypress)="validationService.titleCase($event)"
                                                    placeholder="Stakeholder Name" [ngModelOptions]="{standalone: true}"
                                                    [(ngModel)]="stakeHolderDetails.stakeHolderInfo[i].name"
                                                    style="width: 16rem;">
                                            </td>

                                            <td> <select class="form-select" [disabled]="isReadOnly"
                                                    [(ngModel)]="stakeHolderDetails.stakeHolderInfo[i].designationId"
                                                    [ngModelOptions]="{standalone: true}">
                                                    <option value="">-- Designation --</option>
                                                    <option *ngFor="let desig of designationList"
                                                        value="{{desig.eventDesignationMasterId}}">
                                                        {{ desig.designation}}
                                                    </option>
                                                </select>
                                            </td>

                                            <td><button type="button" class="btn btn-remove"
                                                    (click)="removeStackHolder(i)" style="width: 2rem;"
                                                    *ngIf="stakeHolderDetails.stakeHolderInfo[i].active_flag == 'A' && specificEventDetails?.modalType!='view'">
                                                    <i class="fas fa-minus-circle" style="color: red !important;
                                                        font-size: 20px; "></i>
                                                </button>
                                                <button type="button" class="btn btn-remove" style="width: 2rem;"
                                                    *ngIf="stakeHolderDetails.stakeHolderInfo[i].active_flag == 'D' && specificEventDetails?.modalType!='view'">
                                                    <i class="fas fa-minus-circle" style="color: #f57676 !important;
                                                font-size: 20px;"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>

            </div>

            <div class="row">
                <div class="form-group col-md">

                    <div class="card" style="background: whitesmoke; border: none;
                                        border-radius: 14px; height: 200px;">
                        <div class="card-body" style="height: 40vh;">
                            <h4 class="card-title">Details of Attendee :&nbsp;<span class="text-danger">*&nbsp;</span>
                            </h4>
                            <i class="fas fa-plus-circle" id="circle" (click)="addMoreAttendeeDetails()" style="cursor: pointer; float: right;
                                            margin-top:-45px;" title="Add More Attendee Details"
                                *ngIf="specificEventDetails?.modalType!='view'"></i>

                            <div id="table_wrapper">
                                <table class="table" id="table_wrapper">

                                    <tbody id="tbodyFaciliator" style="text-align:center;">
                                        <tr *ngFor="let items of attendeeDetails.attendeeInfo; index as i">
                                            <td> <input type="text" class="form-control" [attr.readonly]="isReadOnly"
                                                    (keypress)="validationService.onlyAlphabetsAndSpace($event)"
                                                    (keypress)="validationService.titleCase($event)" placeholder="Name"
                                                    [ngModelOptions]="{standalone: true}"
                                                    [(ngModel)]="attendeeDetails.attendeeInfo[i].name"
                                                    style="width: 485px;">
                                            </td>

                                            <td>
                                                <select class="form-select" style="width: 12rem;"
                                                    [disabled]="isReadOnly"
                                                    [(ngModel)]="attendeeDetails.attendeeInfo[i].className"
                                                    [ngModelOptions]="{standalone: true}">
                                                    <option value="">-- Class --</option>
                                                    <option *ngFor="let class of classList" value="{{class}}">
                                                        {{class}}
                                                    </option>
                                                </select>
                                            </td>

                                            <td> <select class="form-select" style="width: 12rem;"
                                                    [disabled]="isReadOnly"
                                                    [(ngModel)]="attendeeDetails.attendeeInfo[i].sex"
                                                    [ngModelOptions]="{standalone: true}">
                                                    <option value="">-- Sex --</option>
                                                    <option value="M" *ngIf="createEventRegisterForm.value.eventType==1||
                                                        specificEventDetails?.eventTypeMasterId==1">
                                                        Male</option>
                                                    <option value="F">Female
                                                    </option>
                                                    <option value="O" *ngIf="createEventRegisterForm.value.eventType==1||
                                                        specificEventDetails?.eventTypeMasterId==1">Others
                                                    </option>
                                                </select>

                                            </td>

                                            <td><button type="button" class="btn btn-remove"
                                                    (click)="removeAttendeeDetails(i)" style="width: 2rem;"
                                                    *ngIf="attendeeDetails.attendeeInfo[i].active_flag == 'A' && specificEventDetails?.modalType!='view'">
                                                    <i class="fas fa-minus-circle" style="color: red !important;
                                                        font-size: 20px; "></i>
                                                </button>
                                                <button type="button" class="btn btn-remove" style="width: 2rem;"
                                                    *ngIf="attendeeDetails.attendeeInfo[i].active_flag == 'D' && specificEventDetails?.modalType!='view'">
                                                    <i class="fas fa-minus-circle" style="color: #f57676 !important;
                                            font-size: 20px;"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="specificEventDetails?.modalType=='view' && capturedImagesList.length > 0">
                <legend class="scheduler-border">Event Captured Images
                </legend>
                <div class="row">
                    <div class="col-md" *ngFor="let image of capturedImagesList; index as i">
                        <a href="{{image.event_school_register_image_url}}" target="_blank">
                            <img src="{{image.event_school_register_image_url}}">
                            <h4 style="margin-left:100px;">Image : {{i+1}}</h4>
                        </a>
                    </div>
                </div>
            </div>
            <!-- 
            <div class="row" *ngIf="specificEventDetails?.modalType!='view' && capturedImagesList.length > 0">
                <div class="form-group col-md">
                    <fieldset class="scheduler-border" style="height: 250px;">
                        <legend class="scheduler-border">Event Captured Images</legend>
                        <div class="col-md" *ngFor="let image of capturedImagesList; index as i">
                            <a href="{{image.event_school_register_image_url}}" target="_blank">
                                <img src="{{image.event_school_register_image_url}}">
                            </a>
                        </div>
                        <div class="row" *ngIf="specificEventDetails?.modalType!='view'">
                            <div class="form-group col-md-3">
                                <img [src]="url1" height="170" width="240">
                                <div class="row">
                                    <div class="col-md-3">
                                      
                                        <input type="file" id="file-upload1" accept=".png, .jpg, .jpeg"
                                            (change)="onSelectFiles($event,'url1','')" />
                                        <label for="file-upload1" id="fileLabel">Browse</label>
                                    </div>
                                    <div class="col-md-7">
                                        <input type="text" placeholder={{path1}} disabled id="filePath" />
                                    </div>

                                    <div class="col-md-2"> <i class="fas fa-minus-circle" style="color: red !important;
                                                       font-size: 20px; margin-left: 10px; margin-top: 3px;"
                                            (click)="onSelectFiles($event,'url1','remove1')"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-md-3">
                                <img [src]="url2" height="170" width="240">
                                <div class="row">
                                    <div class="col-md-3">
                                        <input type="file" id="file-upload2" accept=".png, .jpg, .jpeg"
                                            (change)="onSelectFiles($event,'url2','')" />
                                        <label for="file-upload2" id="fileLabel">Browse</label>
                                    </div>
                                    <div class="col-md-7">
                                        <input type="text" placeholder={{path2}} disabled id="filePath" />
                                    </div>

                                    <div class="col-md-2"> <i class="fas fa-minus-circle" style="color: red !important;
                                                       font-size: 20px; margin-left: 10px; margin-top: 3px;"
                                            (click)="onSelectFiles($event,'url2','remove2')"></i>
                                    </div>
                                
                                </div>
                            </div>
                            <div class="form-group col-md-3">
                                <img [src]="url3" height="170" width="240">
                                <div class="row">
                                   
                                    <div class="col-md-3">
                                        <input type="file" id="file-upload3" accept=".png, .jpg, .jpeg"
                                            (change)="onSelectFiles($event,'url3','')" />
                                        <label for="file-upload3" id="fileLabel">Browse</label>
                                    </div>
                                    <div class="col-md-7">
                                        <input type="text" placeholder={{path3}} disabled id="filePath" />
                                    </div>

                                    <div class="col-md-2"> <i class="fas fa-minus-circle" style="color: red !important;
                                                               font-size: 20px; margin-left: 10px; margin-top: 3px;"
                                            (click)="onSelectFiles($event,'url3','remove3')"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-md-3">
                                <img [src]="url4" height="170" width="240">
                                <div class="row">
                                  
                                    <div class="col-md-3">
                                        <input type="file" id="file-upload4" accept=".png, .jpg, .jpeg"
                                            (change)="onSelectFiles($event,'url4','')" />
                                        <label for="file-upload4" id="fileLabel">Browse</label>
                                    </div>
                                    <div class="col-md-7">
                                        <input type="text" placeholder={{path4}} disabled id="filePath" />
                                    </div>

                                    <div class="col-md-2"> <i class="fas fa-minus-circle" style="color: red !important;
                                                               font-size: 20px; margin-left: 10px; margin-top: 3px;"
                                            (click)="onSelectFiles($event,'url4','remove4')"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div> -->

        </div>

        <!-- Special Events -->
        <div *ngIf="event_is_special == 'Y'">
            <div class="row">
                <div class="form-group col-md">
                    <label for="eventDateFrom">From Date of Event :&nbsp;<span
                            class="text-danger">*&nbsp;</span></label>
                    <input type="date" class="form-control" formControlName="eventDateFrom"
                        (keydown)="restrictTypeOfDate()" (change)="setEventDateTo($event.target.value)"
                        [ngClass]="{'is-invalid': l.eventDateFrom.invalid 
                    && l.eventDateFrom.touched, 'is-valid':l.eventDateFrom.valid &&(l.eventDateFrom.dirty || l.eventDateFrom.touched)}" [min]="minToDate" [max]="maxToDate" />
                    <div *ngIf="l.eventDateFrom.errors" class="invalid-feedback">
                        <div *ngIf="l.eventDateFrom.errors.required">
                            Please select from event date
                        </div>
                    </div>
                </div>

                <div class="form-group col-md">
                    <label for="eventDateTo">To Date of Event:&nbsp;<span class="text-danger">*&nbsp;</span></label>
                    <input type="date" class="form-control" formControlName="eventDateTo"
                        (keydown)="restrictTypeOfDate()" (change)="eventDateTo($event.target.value)"
                        [ngClass]="{'is-invalid': l.eventDateTo.invalid 
                    && l.eventDateTo.touched, 'is-valid':l.eventDateTo.valid &&(l.eventDateTo.dirty || l.eventDateTo.touched)}" [min]="toDateMin">
                    <div *ngIf="l.eventDateTo.errors" class="invalid-feedback">
                        <div *ngIf="l.eventDateTo.errors.required">
                            Please select to event date
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-md">
                    <fieldset class="scheduler-border">
                        <legend class="scheduler-border">Staff/ Role/ Branch :&nbsp;<span
                                class="text-danger">*&nbsp;</span>
                        </legend>
                        <div id="tbodyStaff">
                            <div id="table_wrapper">
                                <table class="table table-striped" id="table_wrapper">

                                    <tbody style="text-align:center;">
                                        <tr *ngFor="let user of hcoUserList; index as i">
                                            <td style="width: 4%;">{{i+1}}</td>
                                            <td style="width: 25%;">{{user.user_firstname}}{{user.user_middlename}}
                                                {{user.user_lastname}} ({{user.role_shortname}}) -
                                                {{user.branch_name?user.branch_name:'NA'}}
                                            </td>
                                            <td style="width: 5%;"> <input
                                                    *ngIf="user.is_checked== true && specificEventDetails?.modalType!='view'"
                                                    class="form-check-input" type="checkbox" value=""
                                                    id="flexCheckDefault" checked
                                                    (change)="selectMultipleStaff($event,user)">
                                                <input
                                                    *ngIf="user.is_checked== false  && specificEventDetails?.modalType!='view'"
                                                    class="form-check-input" type="checkbox" value=""
                                                    id="flexCheckDefault" (change)="selectMultipleStaff($event,user)">
                                                <input
                                                    *ngIf="user.is_checked== true  && specificEventDetails?.modalType=='view'"
                                                    class="form-check-input" type="checkbox" value=""
                                                    id="flexCheckDefault" checked
                                                    (change)="selectMultipleStaff($event,user)" disabled>
                                                <input
                                                    *ngIf="user.is_checked== false  && specificEventDetails?.modalType=='view'"
                                                    class="form-check-input" type="checkbox" value=""
                                                    id="flexCheckDefault" (change)="selectMultipleStaff($event,user)"
                                                    disabled>
                                            </td>
                                        </tr>
                                        <tr *ngIf="hcoUserList.length == 0">
                                            <td colspan="6">No list is available.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-md-6">
                    <div class="card" style="background: whitesmoke; border: none;
                                        border-radius: 14px; height: 240px;">
                        <div class="card-body" style="height: 40vh;">
                            <h4 class="card-title">Facilitator :&nbsp;<span class="text-danger">*&nbsp;</span>
                            </h4>
                            <i class="fas fa-plus-circle" id="circle" (click)="addMoreFacilitator()" style="cursor: pointer; float: right;
                                            margin-top:-45px;" title="Add More Facilitator"
                                *ngIf="specificEventDetails?.modalType!='view'"></i>

                            <div id="table_wrapper">
                                <table class="table" id="table_wrapper">

                                    <tbody id="tbodyFaciliator" style="text-align:center;  height: 170px;">
                                        <tr *ngFor="let items of facilitatorDetails.facilitatorInfo; index as i">
                                            <td> <input type="text" class="form-control" [attr.readonly]="isReadOnly"
                                                    (keypress)="validationService.onlyAlphabetsAndSpace($event)"
                                                    (keypress)="validationService.titleCase($event)"
                                                    placeholder="Facilitator Name" [ngModelOptions]="{standalone: true}"
                                                    [(ngModel)]="facilitatorDetails.facilitatorInfo[i].name"
                                                    style="width: 16rem;">
                                            </td>

                                            <td> <select class="form-select" [disabled]="isReadOnly"
                                                    [(ngModel)]="facilitatorDetails.facilitatorInfo[i].designationId"
                                                    [ngModelOptions]="{standalone: true}">
                                                    <option value="">-- Designation --</option>
                                                    <option *ngFor="let desig of designationList"
                                                        value="{{desig.eventDesignationMasterId}}">
                                                        {{ desig.designation}}
                                                    </option>
                                                </select>

                                            </td>

                                            <td><button type="button" class="btn btn-remove"
                                                    (click)="removeFacilitator(i)" style="width: 2rem;"
                                                    *ngIf="facilitatorDetails.facilitatorInfo[i].active_flag != 'D' && specificEventDetails?.modalType!='view'">
                                                    <i class="fas fa-minus-circle" style="color: red !important;
                                                        font-size: 20px;"></i>
                                                </button>
                                                <button type="button" class="btn btn-remove" style="width: 2rem;"
                                                    *ngIf="facilitatorDetails.facilitatorInfo[i].active_flag == 'D' && specificEventDetails?.modalType!='view'">
                                                    <i class="fas fa-minus-circle" style="color: #f57676 !important;
                                                    font-size: 20px;"></i>
                                                </button>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="form-group col-md-6">
                    <div class="row">
                        <div class="card" style="background: whitesmoke; border: none;
                                        border-radius: 14px; height: 150px;">
                            <div class="card-body" style="height: 40vh;">
                                <h4 class="card-title">Stakeholder :</h4>
                                <i class="fas fa-plus-circle" id="circle" (click)="addMoreStakeHolder()" style="cursor: pointer; float: right;
                                            margin-top:-45px;" title="Add More Stakeholder"
                                    *ngIf="specificEventDetails?.modalType!='view'"></i>

                                <div id="table_wrapper">
                                    <table class="table" id="table_wrapper">

                                        <tbody id="tbodyFaciliator" style="text-align:center;height: 83px;">
                                            <tr *ngFor="let items of stakeHolderDetails.stakeHolderInfo; index as i">
                                                <td> <input type="text" class="form-control"
                                                        [attr.readonly]="isReadOnly"
                                                        (keypress)="validationService.onlyAlphabetsAndSpace($event)"
                                                        (keypress)="validationService.titleCase($event)"
                                                        placeholder="Stakeholder Name"
                                                        [ngModelOptions]="{standalone: true}"
                                                        [(ngModel)]="stakeHolderDetails.stakeHolderInfo[i].name"
                                                        style="width: 16rem;">
                                                </td>

                                                <td> <select class="form-select" [disabled]="isReadOnly"
                                                        [(ngModel)]="stakeHolderDetails.stakeHolderInfo[i].designationId"
                                                        [ngModelOptions]="{standalone: true}">
                                                        <option value="">-- Designation --</option>
                                                        <option *ngFor="let desig of designationList"
                                                            value="{{desig.eventDesignationMasterId}}">
                                                            {{ desig.designation}}
                                                        </option>
                                                    </select>
                                                </td>

                                                <td><button type="button" class="btn btn-remove"
                                                        (click)="removeStackHolder(i)" style="width: 2rem;"
                                                        *ngIf="stakeHolderDetails.stakeHolderInfo[i].active_flag == 'A' && specificEventDetails?.modalType!='view'">
                                                        <i class="fas fa-minus-circle" style="color: red !important;
                                                        font-size: 20px; "></i>
                                                    </button>
                                                    <button type="button" class="btn btn-remove" style="width: 2rem;"
                                                        *ngIf="stakeHolderDetails.stakeHolderInfo[i].active_flag == 'D' && specificEventDetails?.modalType!='view'">
                                                        <i class="fas fa-minus-circle" style="color: #f57676 !important;
                                                font-size: 20px;"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>
                    </div><br>

                    <div class="row">
                        <div class="card" style="background: whitesmoke; border: none;
                        border-radius: 14px; height: 150px;margin-top: -15px;">
                            <div class="card-body" style="height: 40vh;">
                                <h4 class="card-title">Special Guest :</h4>
                                <i class="fas fa-plus-circle" id="circle" (click)="addMoreSpecialGuests()" style="cursor: pointer; float: right;
                            margin-top:-45px;" title="Add More Special Guests"
                                    *ngIf="specificEventDetails?.modalType!='view'"></i>

                                <div id="table_wrapper">
                                    <table class="table" id="table_wrapper">

                                        <tbody id="tbodyFaciliator" style="text-align:center;height: 83px;">
                                            <tr *ngFor="let items of specialGuestDetails.guestsInfo; index as i">
                                                <td> <input type="text" class="form-control"
                                                        [attr.readonly]="isReadOnly"
                                                        (keypress)="validationService.onlyAlphabetsAndSpace($event)"
                                                        (keypress)="validationService.titleCase($event)"
                                                        placeholder="Guest Name" [ngModelOptions]="{standalone: true}"
                                                        [(ngModel)]="specialGuestDetails.guestsInfo[i].name"
                                                        style="width: 16rem;">
                                                </td>

                                                <td> <select class="form-select" [disabled]="isReadOnly"
                                                        [(ngModel)]="specialGuestDetails.guestsInfo[i].designationId"
                                                        [ngModelOptions]="{standalone: true}">
                                                        <option value="">-- Designation --</option>
                                                        <option *ngFor="let desig of designationList"
                                                            value="{{desig.eventDesignationMasterId}}">
                                                            {{ desig.designation}}
                                                        </option>
                                                    </select>

                                                </td>

                                                <td><button type="button" class="btn btn-remove"
                                                        (click)="removeSpecialGuests(i)" style="width: 2rem;"
                                                        *ngIf="specialGuestDetails.guestsInfo[i].active_flag != 'D' && specificEventDetails?.modalType!='view'">
                                                        <i class="fas fa-minus-circle" style="color: red !important;
                                        font-size: 20px;"></i>
                                                    </button>
                                                    <button type="button" class="btn btn-remove" style="width: 2rem;"
                                                        *ngIf="specialGuestDetails.guestsInfo[i].active_flag == 'D' && specificEventDetails?.modalType!='view'">
                                                        <i class="fas fa-minus-circle" style="color: #f57676 !important;
                                    font-size: 20px;"></i>
                                                    </button>
                                                </td>

                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="form-group col-md-6">
                    <div class="card" style="background: whitesmoke; border: none;
                border-radius: 14px; height: 58px; margin-top: -75px;">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md">
                                    <h4 class="card-title">Events :&nbsp;<span class="text-danger">*&nbsp;</span></h4>
                                </div>
                                <div class="col-md"><input class="form-check-input" type="checkbox" value="R"
                                        id="flexCheckDefault" formControlName="rally"
                                        (change)="multipleEventsSelect($event)">&nbsp;&nbsp;Rally</div>
                                <div class="col-md"> <input class="form-check-input" type="checkbox" value="S"
                                        id="flexCheckDefault" formControlName="seminar"
                                        (change)="multipleEventsSelect($event)">&nbsp;&nbsp;Seminar</div>
                                <div class="col-md"><input class="form-check-input" type="checkbox" value="FGD"
                                        formControlName="fgd" id="flexCheckDefault"
                                        (change)="multipleEventsSelect($event)">&nbsp;&nbsp;FGD
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

            </div>

            <div *ngIf="createEventRegisterForm.value.rally==true || createEventRegisterForm.value.seminar==true">
                <div class="row">
                    <div class="form-group col-md">
                        <label for="rallySeminarDate">Date of Rally/ Seminar :&nbsp;<span
                                class="text-danger">*&nbsp;</span></label>
                        <input type="date" class="form-control" formControlName="rallySeminarDate"
                            (keydown)="restrictTypeOfDate()" (change)="changeDateOfRally($event.target.value)"
                            [ngClass]="{'is-invalid': l.rallySeminarDate.invalid 
                    && l.rallySeminarDate.touched, 'is-valid':l.rallySeminarDate.valid &&(l.rallySeminarDate.dirty || l.rallySeminarDate.touched)}"
                            [min]="createEventRegisterForm.value.eventDateFrom"
                            [max]="createEventRegisterForm.value.eventDateTo" />
                        <div *ngIf="l.rallySeminarDate.errors" class="invalid-feedback">
                            <div *ngIf="l.rallySeminarDate.errors.required">
                                Please select the date
                            </div>
                        </div>
                    </div>

                    <div class="form-group col-md">
                        <label for="rallySeminarPlace">Place of Rally/ Seminar :&nbsp;<span
                                class="text-danger">*&nbsp;</span></label>
                        <input type="text" class="form-control" [attr.readonly]="isReadOnly"
                            (keypress)="validationService.onlyAlphabetsAndSpace($event)"
                            (keypress)="validationService.titleCase($event)" placeholder="Enter Place Name"
                            [ngModelOptions]="{standalone: true}" formControlName="rallySeminarPlace" [ngClass]="{'is-invalid': l.rallySeminarPlace.invalid 
                        && l.rallySeminarPlace.touched, 'is-valid':l.rallySeminarPlace.valid &&(l.rallySeminarPlace.dirty ||
                         l.rallySeminarPlace.touched)}">
                        <div *ngIf="l.rallySeminarPlace.errors" class="invalid-feedback">
                            <div *ngIf="l.rallySeminarPlace.errors.required">
                                Please enter the place name</div>
                        </div>

                    </div>
                </div>


                <div class="row">
                    <div class="card" style="background: whitesmoke; border: none;
                                border-radius: 14px; height: 260px;">
                        <div class="card-body" style="height: 40vh;">
                            <div class="row">
                                <div class="form-group col-md-2">
                                    <h4 class="card-title">Participants attended<br>Rally/ Seminar :&nbsp;<span
                                            class="text-danger">*&nbsp;</span></h4>
                                </div>

                                <div class="form-group col-md-5">
                                    <div class="serach_field_23">
                                        <div>
                                            <form active="#"
                                                [ngClass]=" searchFullscreen? 'search_inner_fullscreen' : ' search_inner' ">
                                                <input type="text" name="search"
                                                    placeholder="search by Family No. & Name ..."
                                                    [(ngModel)]="familySearch">
                                                <button type="submit"> <i class="fa fa-search"></i> </button>
                                            </form>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group col-md-5">
                                    <!-- <label for="village">Village Name:&nbsp;<span class="text-danger">*&nbsp;</span></label> -->
                                    <select class="form-select" formControlName="village" id="village" [ngClass]="{'is-invalid':l.village.invalid && 
                            l.village.touched,'is-valid':l.village.valid && (l.village.dirty ||l.village.touched) }"
                                        (change)="getFamiliesWithStatusForAVillage($event.target.value)">
                                        <option value="" *ngIf="!specificEventDetails">-- Select Village --</option>
                                        <option value="allFamilies">All Selected Families</option>
                                        <option *ngFor="let vill of specialEventVillList" value="{{vill.villageId}}">
                                            {{ vill.villageName }}
                                        </option>
                                    </select>
                                    <div *ngIf="l.village.errors" class="invalid-feedback">
                                        <div *ngIf="l.village.errors.required">
                                            Village selection is required
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="tbodyFam">
                                <div id="table_wrapper">
                                    <table class="table table-striped" id="table_wrapper">
                                        <thead id="header_fixed">
                                            <tr style="text-align: center;">
                                                <th style="width: 3%;">Sl. No.</th>
                                                <th style="width: 3%;">Family No.</th>
                                                <th style="width: 25%;">Name</th>
                                                <th style="width: 25%;"
                                                    *ngIf="createEventRegisterForm.value.village=='allFamilies'">Village
                                                    Name</th>
                                                <th style="width: 30%;">Status</th>
                                                <th style="width: 5%;">Select</th>
                                            </tr>
                                        </thead>

                                        <tbody style="text-align:center;">
                                            <tr *ngFor="let fam of familiesWithStatusOfVillage | eventRegisterFilter: {familyNumber : familySearch,
                                                       name :familySearch}; index as i">
                                                <td style="width: 3%;">{{i+1}}</td>
                                                <td style="width: 3%;">{{fam.familyNumber}}</td>
                                                <td style="width: 25%;">{{fam.name}}</td>
                                                <td style="width: 25%;"
                                                    *ngIf="createEventRegisterForm.value.village=='allFamilies'">
                                                    {{fam.villageName}}</td>
                                                <td style="width: 30%;">{{fam.setStatus}}</td>
                                                <td style="width: 5%;"><input
                                                        *ngIf="fam.is_checked== true && specificEventDetails?.modalType!='view'"
                                                        class="form-check-input" type="checkbox" value=""
                                                        id="flexCheckDefault" checked
                                                        (change)="selectMultipleFamilies($event,fam)">
                                                    <input
                                                        *ngIf="fam.is_checked== false  && specificEventDetails?.modalType!='view'"
                                                        class="form-check-input" type="checkbox" value=""
                                                        id="flexCheckDefault"
                                                        (change)="selectMultipleFamilies($event,fam)">
                                                    <input
                                                        *ngIf="fam.is_checked== true  && specificEventDetails?.modalType=='view'"
                                                        class="form-check-input" type="checkbox" value=""
                                                        id="flexCheckDefault" checked
                                                        (change)="selectMultipleFamilies($event,fam)" disabled>
                                                    <input
                                                        *ngIf="fam.is_checked== false  && specificEventDetails?.modalType=='view'"
                                                        class="form-check-input" type="checkbox" value=""
                                                        id="flexCheckDefault"
                                                        (change)="selectMultipleFamilies($event,fam)" disabled>
                                                </td>

                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div>
                    </div>
                </div><br>

                <div class="row">
                    <div class="form-group col-md-6">
                        <div class="card" style="background: whitesmoke; border: none;
                border-radius: 14px; height: 58px;">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h4 class="card-title">SS Attended in Rally/ Seminar :&nbsp;<span
                                                class="text-danger">*&nbsp;</span></h4>
                                    </div>
                                    <div class="col-md-3"><input class="form-check-input" type="radio" value="Y"
                                            id="flexCheckDefault" formControlName="ssAttended"
                                            (change)="SSAttendedRally($event.target.value)">&nbsp;&nbsp;Yes</div>
                                    <div class="col-md-3"> <input class="form-check-input" type="radio" value="N"
                                            id="flexCheckDefault" formControlName="ssAttended"
                                            (change)="SSAttendedRally($event.target.value)">&nbsp;&nbsp;No</div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="row" *ngIf="createEventRegisterForm.value.ssAttended=='Y'">
                    <div class="form-group col-md">
                        <fieldset class="scheduler-border">
                            <legend class="scheduler-border">SS List :&nbsp;<span class="text-danger">*&nbsp;</span>
                            </legend>
                            <div id="tbodyStaff">
                                <div id="table_wrapper">
                                    <table class="table table-striped" id="table_wrapper">
                                        <thead id="header_fixed">
                                            <tr style="text-align: center;">
                                                <th style="width: 4%;">Sl. No.</th>
                                                <th style="width: 25%;">SS - Branch Name</th>
                                                <th style="width: 25%;">Husband/ GuardianName</th>
                                                <th style="width: 5%;">Select</th>
                                            </tr>
                                        </thead>

                                        <tbody style="text-align:center;">
                                            <tr *ngFor="let ss of ssListOfRegion; index as i">
                                                <td style="width: 4%;">{{i+1}}</td>
                                                <td style="width: 25%;">{{ss.ssAndBranchName}}</td>
                                                <td style="width: 25%;">{{ss.husbandOrGuardianName}}</td>
                                                <td style="width: 5%;"> <input
                                                        *ngIf="ss.is_checked== true && specificEventDetails?.modalType!='view'"
                                                        class="form-check-input" type="checkbox" value=""
                                                        id="flexCheckDefault" checked
                                                        (change)="selectMultipleSS($event,ss)">
                                                    <input
                                                        *ngIf="ss.is_checked== false && specificEventDetails?.modalType!='view'"
                                                        class="form-check-input" type="checkbox" value=""
                                                        id="flexCheckDefault" (change)="selectMultipleSS($event,ss)">
                                                    <input
                                                        *ngIf="ss.is_checked== true  && specificEventDetails?.modalType=='view'"
                                                        class="form-check-input" type="checkbox" value=""
                                                        id="flexCheckDefault" checked
                                                        (change)="selectMultipleSS($event,ss)" disabled>
                                                    <input
                                                        *ngIf="ss.is_checked== false && specificEventDetails?.modalType=='view'"
                                                        class="form-check-input" type="checkbox" value=""
                                                        id="flexCheckDefault" (change)="selectMultipleSS($event,ss)"
                                                        disabled>
                                                </td>
                                            </tr>
                                            <tr *ngIf="hcoUserList.length == 0">
                                                <td colspan="6">No list is available.</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>

                <div *ngIf="specificEventDetails?.modalType=='view' && capturedImagesList.length > 0">
                    <legend class="scheduler-border">Event Captured Images</legend>
                    <div class="row">
                        <div class="col-md" *ngFor="let image of capturedImagesList; index as i">
                            <a href="{{image.event_special_register_image_url}}" target="_blank">
                                <img src="{{image.event_special_register_image_url}}">
                                <h4 style="margin-left:100px;">Image : {{i+1}}</h4>
                            </a>
                        </div>
                    </div>
                </div>

            </div>

        </div>

    </form>
</div>

<div class="modal-footer" *ngIf="event_is_special == 'N'">
    <div class="row">
        <button type="button" class="btn btn-primary btn-sm" [disabled]="!disableSchoolEvent()"
            (click)="saveUpdateSchoolEvent()" *ngIf="specificEventDetails?.modalType!='view'">Save</button>
    </div>
</div>

<div class="modal-footer" *ngIf="event_is_special == 'Y'">
    <div class="row">
        <button type="button" class="btn btn-primary btn-sm" (click)="saveUpdateSpecialEvent()"
            [disabled]="!disableSpecialEvent()" *ngIf="specificEventDetails?.modalType!='view'">Save</button>
    </div>
</div>