<app-loader [hidden]="loader"></app-loader>
<div class="container">
    <div class="row">

        <div class="col-md-12">
            <div class="white_box QA_section mb_30">
                <div id="header-fixed" style="display: flex;">
                    <h2 class="page-title">Health Forum</h2>

                    <div class="box_right d-flex lms_block col-md-6">
                        <div class="serach_field_2">
                            <div [ngClass]=" searchFullscreen? 'search_inner_fullscreen ' : ' search_inner' ">
                                <form active="#">
                                    <div class="search_field">
                                        <input type="text" name="search" placeholder="search by staff or ss name ..."
                                            [(ngModel)]="registerSearch">
                                    </div>
                                    <button type="submit"> <i class="fa fa-search"></i> </button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="form-group col-md" style="display: flex; justify-content:flex-end"
                        *ngIf="!healthForumForm.value.branch">
                        <i class="fas fa-plus-circle"
                            style="cursor: pointer; color: #a8d7d7; font-size: 30px; margin-top: 5px;"
                            title="Create Health Forum"></i>
                    </div>

                    <div class="form-group col-md" style="display: flex; justify-content:flex-end"
                        *ngIf="healthForumForm.value.branch || lowerRankbranchId">
                        <i class="fas fa-plus-circle"
                            style="cursor: pointer; color: #499; font-size: 30px; margin-top: 5px;"
                            title="Create Health Forum" (click)="createHealthForum(createHF)"></i>
                    </div>
                </div>

                <form class="form-signin" [formGroup]="healthForumForm">
                    <div class="row" *ngIf="regionBranchHide">
                        <div class="form-group col-md">
                            <label for="region">Region :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                            <select class="form-select" (change)="changeRegion($event.target.value)"
                                formControlName="region" id="region" [ngClass]="{'is-invalid': l.region.invalid && l.region.touched,
                              'is-valid': l.region.valid && (l.region.dirty || l.region.touched) }">
                                <option value="">-- Select Region --</option>
                                <option *ngFor="let region of regionList" value="{{region.regionMasterId}}">
                                    {{region.regionName}}
                                </option>
                            </select>
                            <div *ngIf="l.region.errors" class="invalid-feedback">
                                <div *ngIf="l.region.errors.required">Region selection is required</div>
                            </div>
                        </div>

                        <div class="form-group col-md">
                            <label for="branch">Branch :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                            <select class="form-select" formControlName="branch" id="branch"
                                (change)="changeBranch($event.target.value)"
                                [ngClass]="{'is-invalid': l.branch.invalid
                             && l.branch.touched,  'is-valid': l.branch.valid && (l.branch.dirty || l.branch.touched) }">
                                <option value="">-- Select Branch --</option>
                                <option *ngFor="let branch of branchList" value="{{branch.branchId}}">
                                    {{ branch.branchName }}
                                </option>
                            </select>
                            <div *ngIf="l.branch.errors" class="invalid-feedback">
                                <div *ngIf="l.branch.errors.required">Branch selection is required</div>
                            </div>
                        </div>
                    </div>

                    <div class="white_box_tittle list_header">
                        <div class="QA_table">
                            <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper no-footer">
                                <table
                                    class="table lms_table_active dataTable no-footer dtr-inline collapsed table table-striped"
                                    role="grid" aria-describedby="DataTables_Table_0_info" style="table-layout: fixed;">

                                    <thead>
                                        <tr>
                                            <th style="width: 4%;">Sl.<br>No.</th>
                                            <th style="width: 12%;">Date<br>Scheduled</th>
                                            <th style="width: 12%;">Date<br>Rescheduled</th>
                                            <th style="width: 17%;">Staff Name</th>
                                            <th style="width: 22%;">SS Name</th>
                                            <th style="width: 8%;">Topic</th>
                                            <th style="width: 8%;">Village<br>List</th>
                                            <th style="width: 8%;">Event<br>Details</th>
                                            <th style="width: 11%;">Total Family<br>Attended</th>
                                            <th style="width: 11%;">Total Member<br>Attended</th>
                                            <th style="width: 15%;"> Action</th>
                                        </tr>

                                    </thead>

                                    <tbody>
                                        <tr
                                            *ngFor="let health of viewHealthForumsOfBranch | healthForumFilter: {staffFirstName : 
                                        registerSearch, staffLastName :registerSearch, ssName : registerSearch}  |  paginate: { itemsPerPage: 5, currentPage: p }; index as i">
                                            <td style="width: 4%;"> {{i+1}}</td>
                                            <td style="width: 12%;">
                                                {{health.scheduleDetails.date.split("-").reverse().join("-")}}</td>
                                            <td style="width: 12%;">{{health.rescheduleDetails ?
                                                health.rescheduleDetails.rescheduleToDate.split("-").reverse().join("-")
                                                : '-'}}
                                            </td>
                                            <td style="width: 17%;">{{health.staffFirstName}}
                                                {{health.staffLastName}}
                                            </td>
                                            <td style="width: 22%;">{{health.ssName? health.ssName: '-'}}</td>
                                            <td style="width: 8%;">
                                                <div class="popover__wrapper">
                                                    <h3 class="popover__title" style="color:#0d6efd;">view</h3>
                                                    <div class="popover__content">
                                                        <li style="word-wrap: break-word; text-align: left;">
                                                            * {{health.topicDetails.topicName}}
                                                        </li>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="btn-link"
                                                style="width: 8%; color:#0d6efd; text-decoration: none; cursor: pointer;"
                                                (click)="openDialog(health.villageList)">view</td>
                                            <td class=" btn-link"
                                                style="width: 8%; color:#0d6efd; text-decoration: none; cursor: pointer;"
                                                (click)="viewHFEventDetails(HFeventDetails, health)">view</td>
                                            <td style="width: 11%;">{{health.forumFamilyPresent}}</td>
                                            <td style="width: 11%;">{{health.forumAdolescentGirlPresent+
                                                health.forumFamilyHeadPresent}}</td>
                                            <td style="width: 15%;">
                                                <i class="fas fa-edit" title="Edit Health Forum"
                                                    (click)="editHealthForum(createHF, health)"></i>
                                                <i class="fas fa-trash" title="Delete Health Forum"
                                                    (click)="deleteHealthForum(health)"></i>
                                                <i class="fas fa-check-circle" title="Approve Health Forum"
                                                    (click)="approveHealthForum(health)"></i>
                                            </td>
                                        </tr>

                                    </tbody>

                                </table>
                                <pagination-controls class="d-flex justify-content-end p-1 current ngx-pagination1"
                                    (pageChange)="p = $event" (pageBoundsCorrection)="p = $event ">
                                </pagination-controls>
                            </div>
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>

<ng-template #HFeventDetails>

    <div class="modal-content">
        <div class="modal-header">

            <div class="col-md">
                <h3 class="modal-title" id="modal-basic-title">Event Details</h3>
            </div>
            <div class="col-md">
                <span class="close" (click)="viewHFEventModalDismiss()"
                    style="cursor: pointer;font-size: 35px;float: right; margin-top: -25px;">&times;</span>
            </div>

        </div>

        <div class="modal-body">
            <div class="white_box_tittle list_header">

                <div class="white_box_tittle list_header">
                    <div class="QA_table">
                        <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper no-footer">
                            <table
                                class="table lms_table_active dataTable no-footer dtr-inline collapsed table table-striped"
                                role="grid" aria-describedby="DataTables_Table_0_info" style="table-layout: fixed;">

                                <thead>
                                    <tr>
                                        <th style="width: 8%;">Sl. No.</th>
                                        <th style="width: 10%;">Date</th>
                                        <th style="width: 10%;">Family View/<br>Attended</th>
                                        <th style="width: 8%;">Member<br>Attended</th>
                                        <th style="width: 8%;">Conducted By</th>
                                        <th style="width: 15%;">Topic Discussed</th>
                                        <th style="width: 10%;">Seasonal Disease<br>Discussed</th>
                                        <th style="width: 8%;">Start<br>Time</th>
                                        <th style="width: 8%;">End<br>Time</th>
                                        <th style="width: 10%;">Action</th>
                                    </tr>
                                </thead>

                                <tbody style="text-align: center;">
                                    <tr *ngFor="let event of viewEventList;index as i">
                                        <td style="width: 8%;">{{i+1}}</td>
                                        <td style="width: 10%;">{{event.createdOn.split("-").reverse().join("-")}}</td>
                                        <td style="width: 10%;"><span class="btn-link"
                                                style="color:#0d6efd; text-decoration: none; cursor: pointer;" (click)="
                                            viewFamilyAttendedDetails(ViewFamilyDetails, event)">view</span>&nbsp;
                                            <span>({{event.forumEventFamilyPresent}})</span>

                                        </td>
                                        <td style="width: 8%;">
                                            {{event.forumEventFamilyHeadPresent+event.forumEventAdolescentGirlPresent}}
                                        </td>
                                        <td style="width: 8%;">{{event.eventConductedBy}}</td>
                                        <td style="width: 15%;">{{viewForumList.topicDetails.topicName}}</td>
                                        <td style="width: 10%;">
                                            <div class="popover__wrapper">
                                                <h3 class="popover__title" style="color:#0d6efd;">view</h3>
                                                <div class="popover__content">
                                                    <li style="word-wrap: break-word; text-align: left;"
                                                        *ngFor="let disease of event.seasonalDiseaseDiscussedList; index as i">
                                                        {{i+1}}. {{disease.diseasesName}}
                                                    </li>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 8%;">{{event.startHour}}:{{event.startMinute}}
                                            {{event.startAmOrPm}}</td>
                                        <td style="width: 8%;">{{event.endHour}}:{{event.endMinute}} {{event.endAmOrPm}}
                                        </td>
                                        <td style="width: 10%;">
                                            <i class="fas fa-edit" title="Edit Health Forum Event"
                                                (click)="editHFEvents(editHFEvent, event)"></i>
                                            <i class="fas fa-trash" title="Delete Health Forum Event"
                                                (click)="deleteHFEvent()"></i>
                                        </td>
                                    </tr>
                                </tbody>

                            </table>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

</ng-template>

<ng-template #ViewFamilyDetails>

    <div class="modal-content">
        <div class="modal-header">

            <div class="col-md">
                <h3 class="modal-title" id="modal-basic-title">Family Details</h3>
            </div>
            <div class="col-md">
                <span class="close" (click)="viewFamilyModalDismiss()"
                    style="cursor: pointer;font-size: 35px;float: right; margin-top: -25px;">&times;</span>
            </div>

        </div>

        <div class="modal-body">
            <div class="white_box_tittle list_header">

                <div class="white_box_tittle list_header">
                    <div class="QA_table">
                        <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper no-footer">
                            <table
                                class="table lms_table_active dataTable no-footer dtr-inline collapsed table table-striped"
                                role="grid" aria-describedby="DataTables_Table_0_info" style="table-layout: fixed;">

                                <thead>
                                    <tr>
                                        <th style="width: 8%;">Family No.</th>
                                        <th style="width: 15%;">Family Head Name</th>
                                        <th style="width: 12%;">Village</th>
                                        <th style="width: 13%;">Status Of Family</th>
                                        <th style="width: 8%;">Family Head<br>Present</th>
                                        <th style="width: 8%;">Adolescent Girl<br>Present</th>
                                    </tr>
                                </thead>

                                <tbody *ngFor="let fami of familyDetails">

                                    <tr *ngFor="let fam of fami.familyList; index as i">
                                        <td style="width: 8%;">{{fam.familyNumber}}</td>
                                        <td style="width: 15%;">{{fam.familyFirstName}} {{fam.familyMiddleName}}
                                            {{fam.familyLastName}}</td>
                                        <td style="width: 12%;">{{fami.villageName}}</td>
                                        <td style="width: 13%;">
                                            {{fam.hasChildPresentInPem =='Y' && fam.presentInLactatingMother
                                            =='Y' && fam.presentInPregnantWoman == 'Y' && fam.has2to5yearsOldChildren ==
                                            'Y' ?
                                            'PEM, LM, PW, 2-5 yr' : '' }}

                                            {{fam.hasChildPresentInPem =='Y' && fam.presentInLactatingMother
                                            =='Y' && fam.presentInPregnantWoman.includes('N') &&
                                            fam.has2to5yearsOldChildren == 'Y'? 'PEM, LM, 2-5 yr' : '' }}

                                            {{fam.hasChildPresentInPem =='Y' && fam.presentInLactatingMother
                                            .includes('N') && fam.presentInPregnantWoman.includes('N') &&
                                            fam.has2to5yearsOldChildren.includes('N') ? 'PEM' : ''
                                            }}

                                            {{fam.hasChildPresentInPem.includes('N') &&
                                            fam.presentInLactatingMother.includes('N') &&
                                            fam.presentInPregnantWoman.includes('N') &&
                                            fam.has2to5yearsOldChildren.includes('N')
                                            ? '' : '' }}

                                            {{fam.hasChildPresentInPem.includes('N') &&
                                            fam.presentInLactatingMother
                                            =='Y' && fam.presentInPregnantWoman == 'Y'&& fam.has2to5yearsOldChildren ==
                                            'Y' ? 'LM, PW, 2-5 yr' : '' }}

                                            {{fam.hasChildPresentInPem.includes('N') &&
                                            fam.presentInLactatingMother
                                            .includes('N') && fam.presentInPregnantWoman == 'Y' &&
                                            fam.has2to5yearsOldChildren.includes('N') ? 'PW' : '' }}

                                            {{fam.hasChildPresentInPem.includes('N') &&
                                            fam.presentInLactatingMother
                                            =='Y' && fam.presentInPregnantWoman.includes('N') &&
                                            fam.has2to5yearsOldChildren.includes('N') ? 'LM' : '' }}

                                            {{fam.hasChildPresentInPem =='Y' && fam.presentInLactatingMother
                                            .includes('N') && fam.presentInPregnantWoman == 'Y' &&
                                            fam.has2to5yearsOldChildren == 'Y' ? 'PEM, PW, 2-5 yr' : '' }}

                                            {{fam.hasChildPresentInPem == 'Y' &&
                                            fam.presentInLactatingMother =='Y' &&
                                            fam.presentInPregnantWoman == 'Y' &&
                                            fam.has2to5yearsOldChildren.includes('N') ? 'PEM, LM, PW' : '' }}

                                            {{fam.hasChildPresentInPem == 'Y' &&
                                            fam.presentInLactatingMother =='Y' &&
                                            fam.presentInPregnantWoman.includes('N') &&
                                            fam.has2to5yearsOldChildren.includes('N') ? 'PEM, LM' : '' }}

                                            {{fam.hasChildPresentInPem.includes('N') &&
                                            fam.presentInLactatingMother.includes('N') &&
                                            fam.presentInPregnantWoman =='Y' &&
                                            fam.has2to5yearsOldChildren =='Y' ? 'PW, 2-5 yr' : '' }}

                                            {{fam.hasChildPresentInPem.includes('N') &&
                                            fam.presentInLactatingMother.includes('N') &&
                                            fam.presentInPregnantWoman.includes('N') &&
                                            fam.has2to5yearsOldChildren =='Y' ? '2-5 yr' : '' }}

                                            {{fam.hasChildPresentInPem.includes('N') &&
                                            fam.presentInLactatingMother== 'Y' &&
                                            fam.presentInPregnantWoman== 'Y' &&
                                            fam.has2to5yearsOldChildren.includes('N') ? 'LM, PW' : '' }}

                                            {{fam.hasChildPresentInPem.includes('N') &&
                                            fam.presentInLactatingMother== 'Y' &&
                                            fam.presentInPregnantWoman.includes('N') &&
                                            fam.has2to5yearsOldChildren== 'Y'? 'LM, 2-5 yr' : '' }}

                                            {{fam.hasChildPresentInPem== 'Y' &&
                                            fam.presentInLactatingMother.includes('N') &&
                                            fam.presentInPregnantWoman== 'Y' &&
                                            fam.has2to5yearsOldChildren.includes('N')? 'PEM, PW' : '' }}

                                            {{fam.hasChildPresentInPem== 'Y' &&
                                            fam.presentInLactatingMother.includes('N') &&
                                            fam.presentInPregnantWoman.includes('N') &&
                                            fam.has2to5yearsOldChildren== 'Y'? 'PEM, 2-5 yr' : '' }}
                                        </td>
                                        <td style="width: 8%;">{{fam.family_head_present}}</td>
                                        <td style="width: 8%;">{{fam.hasAdolescentGirlChildren}}</td>
                                    </tr>
                                </tbody>

                            </table>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

</ng-template>

<ng-template #createHF>

    <div class="modal-contents">
        <div class="modal-header">

            <div class="col-md">
                <h2 class="dialog-title" *ngIf="!editHFDetails?.healthForumMasterId;">Create Health Forum</h2>
                <h2 class="dialog-title" *ngIf="editHFDetails?.healthForumMasterId;">Edit Health Forum</h2>
            </div>
            <div class="col-md">
                <span class="close" (click)="createHFModalDismiss()"
                    style="cursor: pointer;font-size: 35px;float: right; margin-top: -25px;">&times;</span>
            </div>

        </div>

        <div class="modal-body" style="height: 40vh; overflow-y: auto;">
            <form class="form-signin" [formGroup]="createHFForm">

                <div class="form-group col-md">
                    <label for="date">Date :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                    <input type="date" class="form-control" formControlName="date" [min]="minDate"
                        (keydown)="restrictTypeOfDate()" (change)="changeDate()" [ngClass]="{'is-invalid': c.date.invalid
                            && c.date.touched,'is-valid': c.date.valid && (c.date.dirty || c.date.touched) }">
                    <div *ngIf="c.date.errors" class="invalid-feedback">
                        <div *ngIf="c.date.errors.required">Date selection is required</div>
                    </div>
                </div>

                <div class="form-group col-md">
                    <label for="staffName">Staff Name :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                    <select class="form-select" (change)="changeStaff($event.target.value)" formControlName="staffName"
                        id="staffName" [ngClass]="{'is-invalid': c.staffName.invalid && c.staffName.touched,
                      'is-valid': c.staffName.valid && (c.staffName.dirty || c.staffName.touched) }">
                        <option value="">-- Select Staff Name --</option>
                        <option *ngFor="let staff of staffList" value="{{staff.staffId}}">
                            {{staff.staffFisrtName}} {{staff.staffMiddleName}} {{staff.staffLastName}}
                        </option>
                    </select>
                    <div *ngIf="c.staffName.errors" class="invalid-feedback">
                        <div *ngIf="c.staffName.errors.required">Staff Name selection is required</div>
                    </div>
                </div>

                <div class="form-group col-md">
                    <label for="ssName">SS Name :</label>
                    <select class="form-select" formControlName="ssName" id="ssName"
                        (change)="changeSS($event.target.value)">
                        <option value="">-- Select SS Name --</option>
                        <option *ngFor="let ss of SSList" value="{{ss.ssId}}">
                            {{ ss.ssName }}
                        </option>
                    </select>
                </div>

                <div class="form-group col-md">
                    <label for="area">Select Multiple Area :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                    <ng-multiselect-dropdown placeholder="-- Select Area(s) --" [settings]="dropdownSettings"
                        [data]="areaList" formControlName="areaList" (onSelect)="onItemSelect($event)"
                        (onSelectAll)="onSelectAll($event)" (onDeSelect)="onItemDeSelect($event)"
                        (onDeSelectAll)="onItemDeSelectAll($event)" class="form-control dropdown-multiselect__caret"
                        [ngClass]="{ 'is-invalid': c.areaList.invalid && c.areaList.touched,
                                'is-valid': c.areaList.valid && (c.areaList.dirty || c.areaList.touched) }">
                    </ng-multiselect-dropdown>

                    <div *ngIf="c.areaList.errors" class="invalid-feedback">
                        <div *ngIf="c.areaList.errors.required">Area selection is required</div>
                    </div>
                </div>

                <div class="form-group col-md">
                    <label for="topic">Topic :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                    <select class="form-select" formControlName="topic" id="topic"
                        [ngClass]="{'is-invalid': 
                        c.topic.invalid && c.topic.touched, 'is-valid': c.topic.valid && (c.topic.dirty || c.topic.touched) }">
                        <option value="">-- Select Topic --</option>
                        <option *ngFor="let topic of topicList" value="{{topic.ss_training_event_topic_id}}">
                            {{topic.ss_training_event_topic_name}}
                        </option>
                    </select>
                    <div *ngIf="c.topic.errors" class="invalid-feedback">
                        <div *ngIf="c.topic.errors.required">Topic selection is required</div>
                    </div>
                </div>

                <div class="form-group col-md">
                    <label for="event">No. of Event Proposed :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                    <select class="form-select" formControlName="event" id="event" [ngClass]="{'is-invalid': c.event.invalid && c.event.touched,  'is-valid': 
                                        c.event.valid && (c.event.dirty || c.event.touched) }">
                        <option value="">-- Select Event--</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                    </select>
                    <div *ngIf="c.event.errors" class="invalid-feedback">
                        <div *ngIf="c.event.errors.required">No. of Event Proposed is required</div>
                    </div>
                </div>

                <div class="form-group col-md">
                    <label for="startTime">Schedule Start Time :&nbsp;<span class="text-danger">*&nbsp;</span></label>
                    <div class="input-group input-group-sm mb-3">
                        <div class="col-md">
                            <select class="form-select" id="inputGroup-sizing-sm" formControlName="hour" id="hour"
                                style="width:9rem" [ngClass]="{'is-invalid': c.hour.invalid && c.hour.touched,  'is-valid': 
                            c.hour.valid && (c.hour.dirty || c.hour.touched) }">
                                <option value="">-- HH --</option>
                                <option *ngFor="let hours of hourList; index as i" value="{{hours.hourValue}}">
                                    {{hours.hourName}}
                                </option>
                            </select>
                            <div *ngIf="c.hour.errors" class="invalid-feedback">
                                <div *ngIf="c.hour.errors.required">Select Hour</div>
                            </div>
                        </div>

                        <div class="col-md">
                            <select class="form-select" id="inputGroup-sizing-sm" formControlName="minute" id="minute"
                                style="width:9rem" [ngClass]="{'is-invalid': c.minute.invalid && c.minute.touched,  'is-valid': 
                            c.minute.valid && (c.minute.dirty || c.minute.touched) }">
                                <option value="">-- MM --</option>
                                <option *ngFor="let minutes of minuteList; index as i" value="{{minutes.minuteValue}}">
                                    {{minutes.minuteName}}
                                </option>
                            </select>
                            <div *ngIf="c.minute.errors" class="invalid-feedback">
                                <div *ngIf="c.minute.errors.required">Select Minute</div>
                            </div>
                        </div>

                        <div class="col-md">
                            <select class="form-select" id="inputGroup-sizing-sm" formControlName="meridiem"
                                id="meridiem" style="width:9rem" [ngClass]="{'is-invalid': c.meridiem.invalid && c.meridiem.touched,  'is-valid': 
                            c.meridiem.valid && (c.meridiem.dirty || c.meridiem.touched) }">
                                <option value="">-- AM/PM --</option>
                                <option value="AM">AM</option>
                                <option value="PM">PM</option>
                            </select>
                            <div *ngIf="c.meridiem.errors" class="invalid-feedback">
                                <div *ngIf="c.meridiem.errors.required">Select Meridiem</div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div class="modal-footer">
            <div class="row">
                <button type="button" class=" btn btn-primary btn-sm" (click)="HfSaveOrUpdate()"
                    [disabled]="!saveIsDisabled()">Save</button>
            </div>
        </div>
    </div>

</ng-template>

<ng-template #editHFEvent>

    <div class="modal-conten">
        <div class="modal-header">

            <div class="col-md">
                <h2 class="dialog-title">Edit Health Forum Event</h2>
            </div>
            <div class="col-md">
                <span class="close" (click)="editHFEventModalDismiss()"
                    style="cursor: pointer;font-size: 35px;float: right; margin-top: -25px;">&times;</span>
            </div>

        </div>

        <div class="modal-body" style="height: 65vh; overflow-y: auto;">
            <form class="form-signin" [formGroup]="editHFEventForm">

                <div class="row">
                    <div class="col-md">
                        <div class="row">
                            <div class="input-group input-group-sm mb-3">
                                <label for="">Start Time :&nbsp;<span
                                        class="text-danger">*&nbsp;</span>&nbsp;&nbsp;</label>
                                <select class="input-group-text" id="inputGroup-sizing-sm" formControlName="startHour"
                                    id="startHour" style="width: 24%;">
                                    <option value="">-- HH --</option>
                                    <option *ngFor="let hours of hourList; index as i" value="{{hours.hourValue}}">
                                        {{hours.hourName}}
                                    </option>
                                </select>
                                <select class="input-group-text" id="inputGroup-sizing-sm" formControlName="startMin"
                                    id="startMin" style="width: 24%;">
                                    <option value="">-- MM --</option>
                                    <option *ngFor="let minutes of minuteList; index as i"
                                        value="{{minutes.minuteValue}}">
                                        {{minutes.minuteName}}
                                    </option>
                                </select>
                                <select class="input-group-text" id="inputGroup-sizing-sm"
                                    formControlName="startMeridiem" id="startMeridiem" style="width: 24%;">
                                    <option value="">-- AM/PM --</option>
                                    <option value="AM">AM</option>
                                    <option value="PM">PM</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="input-group input-group-sm mb-3">
                                <label for="">&nbsp;&nbsp;End Time :&nbsp;<span
                                        class="text-danger">*&nbsp;</span>&nbsp;&nbsp;</label>
                                <select class="input-group-text" id="inputGroup-sizing-sm" formControlName="endHour"
                                    id="endHour" style="width: 24%;">
                                    <option value="">-- HH --</option>
                                    <option *ngFor="let hours of hourList; index as i" value="{{hours.hourValue}}">
                                        {{hours.hourName}}
                                    </option>
                                </select>
                                <select class="input-group-text" id="inputGroup-sizing-sm" formControlName="endMin"
                                    id="endMin" style="width: 24%;">
                                    <option value="">-- MM --</option>
                                    <option *ngFor="let minutes of minuteList; index as i"
                                        value="{{minutes.minuteValue}}">
                                        {{minutes.minuteName}}
                                    </option>
                                </select>
                                <select class="input-group-text" id="inputGroup-sizing-sm" formControlName="endMeridiem"
                                    id="endMeridiem" style="width: 24%;">
                                    <option value="">-- AM/PM --</option>
                                    <option value="AM">AM</option>
                                    <option value="PM">PM</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="card" style="width: 540px;  background: whitesmoke; border: none;  border-radius: 14px;
                                height: 150px; margin-left: 15px;">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="form-group col-md" style="margin-top: 15px;">
                                            <label for="staffPresent">
                                                Staff Present :&nbsp;<span
                                                    class="text-danger">*&nbsp;</span></label><br>

                                            <div class="form-check-inline">
                                                <input class="form-check-input" type="radio" id="yes" value="Y"
                                                    formControlName="staffPresent"
                                                    (change)="changestaffPresent($event)" />
                                                <label class="form-check-label" for="">
                                                    &nbsp;&nbsp;Yes</label>

                                                <div class="form-check-inline">
                                                    &nbsp;&nbsp;&nbsp;
                                                    <input class="form-check-input" type="radio" id="no" value="N"
                                                        formControlName="staffPresent"
                                                        (change)="changestaffPresent($event)" />
                                                    <label class="form-check-label" for="">
                                                        &nbsp;&nbsp;No</label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group col-md" style="margin-top: 15px;">
                                            <label for="ssPresent">
                                                SS Present :&nbsp;<span class="text-danger">*&nbsp;</span></label><br>

                                            <div class="form-check-inline">
                                                <input class="form-check-input" type="radio" id="yes" value="Y"
                                                    formControlName="ssPresent" (change)="changessPresent($event)" />
                                                <label class="form-check-label" for="">
                                                    &nbsp;&nbsp;Yes</label>

                                                <div class="form-check-inline">
                                                    &nbsp;&nbsp;&nbsp;
                                                    <input class="form-check-input" type="radio" id="no" value="N"
                                                        formControlName="ssPresent"
                                                        (change)="changessPresent($event)" />
                                                    <label class="form-check-label" for="">
                                                        &nbsp;&nbsp;No</label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group col-md" style="margin-top: 15px;">
                                            <label for="eventConduction">Event Conducted By :&nbsp;<span
                                                    class="text-danger">*&nbsp;</span></label>
                                            <select class="form-select" formControlName="eventConduction"
                                                id="eventConduction"
                                                [ngClass]="{'is-invalid': e.eventConduction.invalid && e.eventConduction.touched,  'is-valid': 
                                                            e.eventConduction.valid && (e.eventConduction.dirty || e.eventConduction.touched) }">
                                                <option value="">-- Select --</option>
                                                <option value="staff">Staff</option>
                                                <option value="ss">SS</option>
                                            </select>
                                            <div *ngIf="e.eventConduction.errors" class="invalid-feedback">
                                                <div *ngIf="e.eventConduction.errors.required">Select event conduction
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group col-md">

                        <div class="card" style="width: 690px;  background: whitesmoke; border: none;
                                            border-radius: 14px; height: 240px; margin-left: -75px;">
                            <div class="card-body" style="height: 40vh;">
                                <h4 class="card-title">Visitor Details :</h4>
                                <i class="fas fa-plus-circle" id="circle" (click)="addMoreVisitor()" style="cursor: pointer; float: right;
                                                margin-top:-45px;"></i>

                                <div id="table_wrapper">
                                    <table class="table" id="table_wrapper">
                                        <thead id="header_fixed">
                                            <tr style="text-align: center;">
                                                <th style="width: 10rem;">Name</th>
                                                <th style="width: 10rem;">Designation</th>
                                                <th style="width: 3rem;">Remove</th>
                                            </tr>
                                        </thead>

                                        <tbody id="tbody" style="text-align:center;">
                                            <tr *ngFor="let items of visitorDetails.visitorInfo; index as i">
                                                <td> <input type="text" class="form-control" maxlength="20"
                                                        (keypress)="validationService.onlyAlphabetsAndSpace($event)"
                                                        style="text-transform:capitalize;"
                                                        (keypress)="validationService.titleCase($event)"
                                                        placeholder="e.g. xyz"
                                                        [(ngModel)]="visitorDetails.visitorInfo[i].name"
                                                        style="width: 16rem;">
                                                </td>
                                                <td> <input type="text" class="form-control" maxlength="20"
                                                        (keypress)="validationService.onlyAlphabetsAndSpace($event)"
                                                        style="text-transform:capitalize;"
                                                        (keypress)="validationService.titleCase($event)"
                                                        placeholder="e.g. Engineer"
                                                        [(ngModel)]="visitorDetails.visitorInfo[i].designation"
                                                        style="width: 16rem; margin-left: 75px;">
                                                </td>
                                                <td><button type="button" class="btn btn-remove"
                                                        (click)="removeNewVisitor(i)" style="width: 2rem;"><i
                                                            class="fas fa-minus-circle"></i></button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="form-group col-md">
                        <div class="card"
                            style="width: 540px;background: whitesmoke; border: none;border-radius: 14px;height: 550px;">
                            <div class="card-body">
                                <h4 class="card-title">Discussion Topic :</h4>

                                <div class="row">
                                    <div class="form-group col-md-8">
                                        <label for="lastMonTopic">
                                            Recap Last Month's Topic :&nbsp;<span
                                                class="text-danger">*&nbsp;</span></label>
                                        <h5>(Planning for better health and how to reduce health expenditures)</h5>
                                    </div>

                                    <div class="form-group col-md-4">
                                        <div class="form-check-inline">
                                            <input class="form-check-input" type="radio" id="yes" value="Y"
                                                formControlName="lastMonTopic" (change)="changelastMonTopic($event)" />
                                            <label class="form-check-label" for="">
                                                &nbsp;&nbsp;Yes</label>
                                        </div>

                                        <div class="form-check-inline">
                                            &nbsp;&nbsp;&nbsp;
                                            <input class="form-check-input" type="radio" id="no" value="N"
                                                formControlName="lastMonTopic" (change)="changelastMonTopic($event)" />
                                            <label class="form-check-label" for="">
                                                &nbsp;&nbsp;No</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="form-group col-md-8">
                                        <label for="thisMonTopic">
                                            Discussion on This Month's Topic :&nbsp;<span
                                                class="text-danger">*&nbsp;</span></label>
                                        <h5>(Planning for better health and how to reduce health expenditures)</h5>
                                    </div>

                                    <div class="form-group col-md-4">
                                        <div class="form-check-inline">
                                            <input class="form-check-input" type="radio" id="yes" value="Y"
                                                formControlName="thisMonTopic" (change)="changethisMonTopic($event)" />
                                            <label class="form-check-label" for="">
                                                &nbsp;&nbsp;Yes</label>
                                        </div>

                                        <div class="form-check-inline">
                                            &nbsp;&nbsp;&nbsp;
                                            <input class="form-check-input" type="radio" id="no" value="N"
                                                formControlName="thisMonTopic" (change)="changethisMonTopic($event)" />
                                            <label class="form-check-label" for="">
                                                &nbsp;&nbsp;No</label>
                                        </div>

                                    </div>

                                </div>

                                <div class="row">
                                    <div class="form-group col-md-8">
                                        <label for="seasonalDiscussion">
                                            Any Discussion on Seasonal Diseases :&nbsp;<span
                                                class="text-danger">*&nbsp;</span></label>
                                    </div>

                                    <div class="form-group col-md-4">
                                        <div class="form-check-inline">
                                            <input class="form-check-input" type="radio" id="yes" value="Y"
                                                formControlName="seasonalDiscussion"
                                                (change)="changeseasonalDiscussion($event)" />
                                            <label class="form-check-label" for="">
                                                &nbsp;&nbsp;Yes</label>
                                        </div>

                                        <div class="form-check-inline">
                                            &nbsp;&nbsp;&nbsp;
                                            <input class="form-check-input" type="radio" id="no" value="N"
                                                formControlName="seasonalDiscussion"
                                                (change)="changeseasonalDiscussion($event)" />
                                            <label class="form-check-label" for="">
                                                &nbsp;&nbsp;No</label>
                                        </div>

                                    </div>
                                </div>

                                <div class="row">
                                    <!-- <div class="form-group col-md" style="margin-top: -12px;">
                                        <label for="seasonalDisease">Seasonal Disease Name :&nbsp;<span
                                                class="text-danger">*&nbsp;</span></label>
                                        <select class="form-select"
                                            (change)="changeseasonalDisease($event.target.value)"
                                            formControlName="seasonalDisease" id="seasonalDisease"
                                            [ngClass]="{'is-invalid': e.seasonalDisease.invalid && e.seasonalDisease.touched,
                                          'is-valid': e.seasonalDisease.valid && (e.seasonalDisease.dirty || e.seasonalDisease.touched) }">
                                            <option value="">-- Select Disease Name--</option>
                                            <option *ngFor="let disease of eventDiseaseList; index as i"
                                                value="{{disease.diseaseId}}">
                                                {{disease.diseaseName}}<input class="form-check-input" type="checkbox" value=""
                                                id="flexCheckDefault"
                                                (change)="unmapRemapSS($event, item.houseHoldDetailId)">
                                            </option>

                                        </select>
                                        <div *ngIf="e.seasonalDisease.errors" class="invalid-feedback">
                                            <div *ngIf="e.seasonalDisease.errors.required">Please select seasonal
                                                disease name</div>
                                        </div>
                                    </div> -->

                                    <fieldset class="scheduler-border">
                                        <legend class="scheduler-border">Seasonal Disease Name</legend>
                                        <div id="table_wrapper">
                                            <table class="table table-striped" id="table_wrapper">
                                                <thead id="header_fixed">
                                                    <tr style="text-align: center;">
                                                        <th style="width: 5%;">Sl. No.</th>
                                                        <th style="width: 25%;">Name</th>
                                                        <th style="width: 5%;">Select</th>
                                                    </tr>

                                                </thead>


                                                <tbody style="text-align:center;" id="tbodyDisease">
                                                    <tr *ngFor="let disease of eventDiseaseList; index as i;">
                                                        <td style="width: 5%;">{{i+1}}</td>
                                                        <td style="width: 25%;">{{disease.diseaseName}}</td>
                                                        <td style="width: 5%;"><input class="form-check-input"
                                                                type="checkbox" value="" id="flexCheckDefault"
                                                                (change)="unmapRemapSS($event, item.houseHoldDetailId)">
                                                        </td>
                                                    </tr>
                                                </tbody>

                                            </table>
                                        </div>
                                    </fieldset>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="form-group col-md">
                        <mat-tab-group animationDuration="500ms" (selectedTabChange)="tabChanged($event)">
                            
                            <mat-tab *ngFor="let vill of eventVillList; index as i" class="mat-tab-body mat-tab-body-active">
                                <ng-template mat-tab-label>
                                    {{vill.villageName}}
                                </ng-template>
                                <ng-template matTabContent>
                                    <div id="table_wrapper">
                                        <table class="table table-striped" id="table_wrapper">
                                            <thead id="header_fixed">
                                                <tr style="text-align: center;">
                                                    <th>Family No.</th>
                                                    <th>Name</th>
                                                    <th>Status</th>
                                                    <th>Enter Record</th>
                                                </tr>
                                            </thead>

                                            <tbody id="tbodyy" style="text-align:center;"
                                                *ngFor="let fam of eventFamList; index as i">
                                                <tr *ngFor="let fami of fam.familyList;">
                                                    <td>{{fami.familyNumber}}</td>
                                                    <td>{{fami.firstName}}{{fami.middleName}}
                                                        {{fami.lastName}}</td>
                                                    <td>{{fami.setStatus}}</td>
                                                    <td><i class="fas fa-save" title="Enter Record"
                                                            (click)="SaveFamilyRecord(fami, famRecord)"></i></td>
                                                </tr>
                                            </tbody>

                                        </table>
                                    </div>
                                    <!-- <div *ngFor="let fam of eventFamList; index as i">
                                        <div class="card" *ngFor="let fami of fam.familyList;"
                                            style="width: 670px;background: whitesmoke; border: none;border-radius: 14px;height: 150px; margin-bottom:10px">

                                            <div class="card-body">

                                                <div class="row">
                                                    <div class="form-group col-md-3">
                                                        <h4 class="card-title">Family No. : {{fami.familyNumber}}</h4>
                                                    </div>
                                                    <div class="form-group col-md-9">
                                                        <h4 class="card-title">Name :
                                                            {{fami.firstName}}{{fami.middleName}} {{fami.lastName}}</h4>
                                                    </div>
                                                    <div class="row">
                                                        <div class="form-group col-md">
                                                            <h4 class="card-title">Status : {{fami.setStatus}}</h4>
                                                        </div>

                                                        <div class="form-group col-md">
                                                            <label for="">
                                                                Family Head Present :&nbsp;<span
                                                                    class="text-danger">*&nbsp;</span></label>
                                                        </div>

                                                        <div class="form-group col-md">
                                                            <div class="form-check-inline">
                                                                <input class="form-check-input" type="radio" id="yes"
                                                                    value="Y" formControlName="thisMonTopic"
                                                                    (change)="changethisMonTopic($event)" />
                                                                <label class="form-check-label" for="">
                                                                    &nbsp;&nbsp;Yes</label>
                                                            </div>

                                                            <div class="form-check-inline">
                                                                &nbsp;&nbsp;&nbsp;
                                                                <input class="form-check-input" type="radio" id="no"
                                                                    value="N" formControlName="thisMonTopic"
                                                                    (change)="changethisMonTopic($event)" />
                                                                <label class="form-check-label" for="">
                                                                    &nbsp;&nbsp;No</label>
                                                            </div>

                                                        </div>
                                                    </div>

                                                </div>


                                            </div>


                                        </div>
                                    </div> -->

                                </ng-template>
                            </mat-tab>
                        </mat-tab-group>
                    </div>

                </div>

            </form>
        </div>

    </div>
</ng-template>

<ng-template #famRecord>

    <div class="modal-contain">
        <div class="modal-header">

            <div class="col-md">
                <h2 class="dialog-title">Enter Family Record</h2>
            </div>
            <div class="col-md">
                <span class="close" (click)="saveFamRecordModalDismiss()"
                    style="cursor: pointer;font-size: 35px;float: right; margin-top: -25px;">&times;</span>
            </div>

        </div>

        <div class="modal-body">
            <div class="row">
                <div class="card"
                    style="width: 475px;background: whitesmoke; border: none;border-radius: 14px;height: 70px;margin-left: 8px">
                    <div class="card-body">

                        <div class="row">
                            <div class="form-group col-md">
                                <h4 class="card-title">Family Head Present :&nbsp;<span
                                        class="text-danger">*&nbsp;</span>
                                </h4>
                            </div>

                            <div class="form-group col-md">
                                <div class="form-check-inline">
                                    <input class="form-check-input" type="radio" id="yes" value="Y"
                                        formControlName="thisMonTopic" (change)="changethisMonTopic($event)" />
                                    <label class="form-check-label" for="">
                                        &nbsp;&nbsp;Yes</label>
                                </div>

                                <div class="form-check-inline">
                                    &nbsp;&nbsp;&nbsp;
                                    <input class="form-check-input" type="radio" id="no" value="N"
                                        formControlName="thisMonTopic" (change)="changethisMonTopic($event)" />
                                    <label class="form-check-label" for="">
                                        &nbsp;&nbsp;No</label>
                                </div>

                            </div>

                        </div>

                    </div>
                </div>
            </div>

            <div class="row">

                <fieldset class="scheduler-border">
                    <legend class="scheduler-border">Adolescent Girl Attended</legend>
                    <div id="table_wrapper">
                        <table class="table table-striped" id="table_wrapper">
                            <thead id="header_fixed">
                                <tr style="text-align: center;">
                                    <th style="width: 2%;">Sl. No.</th>
                                    <th style="width: 51%;">Child Name</th>
                                    <th style="width: 46%;">Age</th>
                                </tr>

                            </thead>

                            <tbody id="tbodys">
                                <table>
                                    <tbody style="text-align:center;"
                                        *ngFor="let adol of adolescentGilrChildren;index as i;">
                                        <tr>
                                            <td style="width: 2%;">{{i+1}}</td>
                                            <td style="width: 51%;">{{adol.ChildName}}</td>
                                            <td style="width: 46%;">{{adol.Age}}</td>
                                        </tr>
                                        <div class="row" style="background: whitesmoke;">
                                            <div class="form-group col-md">
                                                <h4 class="card-title">Adolescent Girl Attended :&nbsp;<span
                                                        class="text-danger">*&nbsp;</span>
                                                </h4>
                                            </div>

                                            <div class="form-group col-md">
                                                <div class="form-check-inline">
                                                    <input class="form-check-input" type="radio" id="yes" value="Y"
                                                        formControlName="thisMonTopic"
                                                        (change)="changethisMonTopic($event)" />
                                                    <label class="form-check-label" for="">
                                                        &nbsp;&nbsp;Yes</label>
                                                </div>

                                                <div class="form-check-inline">
                                                    &nbsp;&nbsp;&nbsp;
                                                    <input class="form-check-input" type="radio" id="no" value="N"
                                                        formControlName="thisMonTopic"
                                                        (change)="changethisMonTopic($event)" />
                                                    <label class="form-check-label" for="">
                                                        &nbsp;&nbsp;No</label>
                                                </div>

                                            </div>
                                        </div>

                                    </tbody>
                                </table>
                            </tbody>

                        </table>
                    </div>
                </fieldset>

            </div>
        </div>
    </div>

</ng-template>